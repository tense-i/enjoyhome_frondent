import{d as A,b as L,u as I,e as f,f as r,i as h,k as T,j as o,w as s,l as $,A as V,B as x,h as v,g as K,_ as W,r as D,o as j,F as N,D as H}from"./index.2854391f.js";import{j as z,k as U}from"./date.f423aacf.js";import{t as M,w as O,x as R}from"./commonData.fd496339.js";import{f as q}from"./synergy.b2de5250.js";import{S as G}from"./switchBar.088ec857.js";import{N as P}from"./index.be6ad7be.js";const Y=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u5355\u636E\u7F16\u53F7",minWidth:180,colKey:"code"},{title:"\u5355\u636E\u6807\u9898",minWidth:200,colKey:"title"},{title:"\u5355\u636E\u7C7B\u522B",minWidth:180,colKey:"type"},{title:"\u7533\u8BF7\u4EBA",minWidth:180,colKey:"applicat"},{title:"\u7533\u8BF7\u65F6\u95F4",minWidth:300,colKey:"applicationTime"},{title:"\u7B49\u5F85\u65F6\u957F",minWidth:180,colKey:"waitingTime"},{title:"\u6D41\u7A0B\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(l,{row:d})=>{const m={1:{label:"\u7533\u8BF7\u4E2D"},2:{label:"\u5DF2\u5B8C\u6210"},3:{label:"\u5DF2\u5173\u95ED"}};return l("span",{class:`status-dot status-dot-${d.status}`},m[d.status].label)}},{align:"left",fixed:"right",width:65,minWidth:"65px",colKey:"op",title:"\u64CD\u4F5C"}],J=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u5355\u636E\u7F16\u53F7",minWidth:180,colKey:"code"},{title:"\u5355\u636E\u6807\u9898",minWidth:180,colKey:"title"},{title:"\u5355\u636E\u7C7B\u522B",minWidth:180,colKey:"type"},{title:"\u7533\u8BF7\u4EBA",minWidth:180,colKey:"applicat"},{title:"\u7533\u8BF7\u65F6\u95F4",minWidth:300,colKey:"applicationTime"},{title:"\u5B8C\u6210\u65F6\u95F4",minWidth:180,colKey:"finishTime"},{title:"\u6D41\u7A0B\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(l,{row:d})=>{const m={1:{label:"\u7533\u8BF7\u4E2D"},2:{label:"\u5DF2\u5B8C\u6210"},3:{label:"\u5DF2\u5173\u95ED"}};return l("span",{class:`status-dot status-dot-${d.status}`},m[d.status].label)}},{align:"left",fixed:"right",width:65,minWidth:"65px",colKey:"op",title:"\u64CD\u4F5C"}],Q={class:"baseList"},X={class:"tableBoxs"},Z={key:0},ee={key:1},te={key:2},ae={class:"operateCon"},le=["onClick"],ne=["onClick"],ue="index",oe=A({__name:"TableList",props:{listData:{type:Object,default:()=>[]},total:{type:Number,default:0},pagination:{type:Object,default:()=>({})},dataLoading:{type:Boolean,default:!1}},emits:["handleOpen","getCurrent"],setup(l,{emit:d}){const m=L(),F=I(),y=n=>{F.setEnterBaseData({}),n.type===1?m.push({path:"/active/applyDetails",query:{assigneeId:n.assigneeId,code:n.code,isHandle:n.isHandle,taskId:n.id,path:"backlogAfter"}}):n.type===2?console.log(n):m.push({path:"/active/checkDetails",query:{assigneeId:n.assigneeId,code:n.code,isHandle:n.isHandle,taskId:n.id,path:"backlogAfter"}})},u=n=>{const i=new Date(n),t=i.getFullYear(),g=i.getMonth()+1,e=i.getDate(),c=i.getHours(),E=i.getMinutes(),C=i.getSeconds();return p(t,g,e,c,E,C)},p=(n,i,t,g,e,c)=>{const E=new Date,C=new Date(n,i-1,t,g,e,c);let B=E.getTime()-C.getTime();B<=0&&(B=0);const S=parseInt(B/1e3);t=Math.floor(S/(60*60*24));const _=Math.floor((S-t*24*60*60)/3600),a=Math.floor((S-t*24*60*60-_*3600)/60),b=Math.floor(B/1e3%60,10);let w="";return t>0?w=`${t}\u5929${_}\u5C0F\u65F6${a}\u5206\u949F${b}\u79D2`:_>0?w=`${_}\u5C0F\u65F6${a}\u5206\u949F${b}\u79D2`:a>0?w=`${a}\u5206\u949F${b}\u79D2`:w=`${b}\u79D2`,w},k=n=>{d("getCurrent",n)};return(n,i)=>{const t=f("t-table"),g=f("t-pagination");return r(),h("div",Q,[T("div",X,[o(t,{data:l.listData,columns:l.pagination.isHandle===0?x(Y):x(J),"row-key":ue,"vertical-align":"middle",hover:!0,loading:l.dataLoading,"table-layout":"fixed","table-content-width":"100%"},{rowIndex:s(({rowIndex:e})=>[$(V(e+1),1)]),type:s(({row:e})=>[e.type===1?(r(),h("span",Z,"\u9000\u4F4F")):e.type===2?(r(),h("span",ee,"\u8BF7\u5047")):(r(),h("span",te,"\u5165\u4F4F"))]),waitingTime:s(({row:e})=>[$(V(u(e.applicationTime)),1)]),finishTime:s(({row:e})=>[$(V(e.finishTime?e.finishTime:"--"),1)]),op:s(({row:e})=>[T("div",ae,[l.pagination.isHandle===0?(r(),h("a",{key:0,class:"font-bt",onClick:c=>y(e)},"\u5904\u7406",8,le)):(r(),h("a",{key:1,class:"font-bt",onClick:c=>y(e)},"\u67E5\u770B",8,ne))])]),empty:s(()=>[o(P)]),_:1},8,["data","columns","loading"]),v(" \u5206\u9875 "),l.total>10?(r(),K(g,{key:0,modelValue:l.pagination.pageNum,"onUpdate:modelValue":i[0]||(i[0]=e=>l.pagination.pageNum=e),pageSize:l.pagination.pageSize,"onUpdate:pageSize":i[1]||(i[1]=e=>l.pagination.pageSize=e),total:l.total,onChange:k},null,8,["modelValue","pageSize","total"])):v("v-if",!0),v(" end ")])])}}});var se=W(oe,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/backlog/components/TableList.vue"]]);const ie={class:"formBox"},de=A({__name:"SearchForm",props:{searchData:{type:Object,default:()=>({})}},emits:["handleSearch","handleReset","handleClear"],setup(l,{emit:d}){const m=D(null),F=D([]),y=D([]);j(()=>{y.value=[...M],y.value.splice(0,1)});const u=()=>{F.value=[],m.value.reset(),d("handleReset")},p=()=>{d("handleSearch",F.value)},k=(i,t)=>{t.trigger==="clear"&&d("handleClear",t.trigger)},n=i=>{d("handleClear",i)};return(i,t)=>{const g=f("t-input"),e=f("t-form-item"),c=f("t-col"),E=f("t-date-range-picker"),C=f("t-option"),B=f("t-select"),S=f("t-row"),_=f("t-form");return r(),h("div",ie,[o(_,{ref_key:"form",ref:m,model:l.searchData,"label-width":98},{default:s(()=>[o(S,null,{default:s(()=>[o(c,null,{default:s(()=>[o(e,{label:"\u5355\u636E\u7F16\u53F7\uFF1A",name:"code"},{default:s(()=>[o(g,{modelValue:l.searchData.code,"onUpdate:modelValue":t[0]||(t[0]=a=>l.searchData.code=a),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:t[1]||(t[1]=a=>n("code"))},null,8,["modelValue"])]),_:1})]),_:1}),o(c,null,{default:s(()=>[o(e,{label:"\u7533\u8BF7\u4EBA\uFF1A",name:"applicat"},{default:s(()=>[o(g,{modelValue:l.searchData.applicat,"onUpdate:modelValue":t[2]||(t[2]=a=>l.searchData.applicat=a),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:t[3]||(t[3]=a=>n("applicat"))},null,8,["modelValue"])]),_:1})]),_:1}),o(c,null,{default:s(()=>[o(e,{label:"\u7533\u8BF7\u65F6\u95F4\uFF1A",name:"timeData"},{default:s(()=>[o(E,{modelValue:F.value,"onUpdate:modelValue":t[4]||(t[4]=a=>F.value=a),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],clearable:"",onChange:k},null,8,["modelValue"])]),_:1})]),_:1}),o(c,null,{default:s(()=>[o(e,{label:"\u5355\u636E\u7C7B\u522B\uFF1A",name:"type"},{default:s(()=>[o(B,{modelValue:l.searchData.type,"onUpdate:modelValue":t[5]||(t[5]=a=>l.searchData.type=a),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",onClear:t[6]||(t[6]=a=>n("type"))},{default:s(()=>[(r(!0),h(N,null,H(x(O),(a,b)=>(r(),K(C,{key:b,value:a.id,label:a.value,title:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(c,null,{default:s(()=>[o(e,{label:"\u6D41\u7A0B\u72B6\u6001\uFF1A",name:"status"},{default:s(()=>[o(B,{modelValue:l.searchData.status,"onUpdate:modelValue":t[7]||(t[7]=a=>l.searchData.status=a),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",onClear:t[8]||(t[8]=a=>n("status"))},{default:s(()=>[(r(!0),h(N,null,H(y.value,(a,b)=>(r(),K(C,{key:b,value:a.id,label:a.value,title:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),v(" \u6309\u94AE\u533A\u57DF "),o(c,{class:"searchBtn"},{default:s(()=>[T("button",{type:"button",class:"bt-grey wt-60",onClick:t[9]||(t[9]=a=>u())}," \u91CD\u7F6E "),T("button",{type:"button",class:"bt wt-60",onClick:t[10]||(t[10]=a=>p())}," \u641C\u7D22 ")]),_:1})]),_:1})]),_:1},8,["model"])])}}});var ce=W(de,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/backlog/components/SearchForm.vue"]]);const re={class:"min-h subscribe bg-wt"},me={class:"marg-main newBox"},pe=A({__name:"index",setup(l){const d=D([]),m=D(!1),F=D(0),y=D(null),u=D({pageSize:10,pageNum:1,reqType:0,isHandle:0});j(()=>{p()});const p=async()=>{m.value=!1;try{const e=await q(u.value);d.value=e.data.records,F.value=Number(e.data.total)}finally{m.value=!1}},k=e=>{u.value.pageNum=1,e.length>0&&(u.value.startTime=z(e[0]),u.value.endTime=U(e[1])),p()},n=()=>{u.value={pageSize:10,pageNum:1,reqType:0,isHandle:0},y.value.currentId=0,p()},i=e=>{u.value.pageNum=e.current,u.value.pageSize=e.pageSize,p()},t=e=>{u.value.pageNum=1,u.value.isHandle=e,p()},g=e=>{e==="code"?delete u.value.code:e==="applicat"?delete u.value.applicat:e==="type"?delete u.value.type:e==="status"?delete u.value.status:(delete u.value.startTime,delete u.value.endTime),u.value={...u.value,isHandle:u.value.isHandle===1?1:0},p()};return(e,c)=>(r(),h("div",re,[v(" \u7B5B\u9009\u533A\u57DF "),o(ce,{"search-data":u.value,onHandleClear:g,onHandleSearch:k,onHandleReset:n},null,8,["search-data"]),v(" end "),v(" tab\u5BFC\u822A "),T("div",me,[o(G,{ref_key:"tabBar",ref:y,data:x(R),onChangeId:t},null,8,["data"])]),v(" \u8868\u683C "),o(se,{"list-data":d.value,pagination:u.value,total:F.value,onGetCurrent:i},null,8,["list-data","pagination","total"]),v(" end ")]))}});var be=W(pe,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/backlog/index.vue"]]);export{be as default};
