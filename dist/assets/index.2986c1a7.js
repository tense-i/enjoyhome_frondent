import{d as T,b as L,e as m,f as _,i as C,k as v,j as u,w as n,l as N,A as $,n as H,B as w,h as f,g as z,_ as V,r,F as K,D as R,u as W,H as M,M as I,o as q,T as P}from"./index.2854391f.js";import{j as G,k as J}from"./date.f423aacf.js";import{w as U,t as Q}from"./commonData.fd496339.js";import{h as X,i as Y}from"./synergy.b2de5250.js";import{h as Z}from"./checkin.d8e693ed.js";import{S as ee}from"./switchBar.088ec857.js";import{N as te}from"./index.be6ad7be.js";const ae=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u5355\u636E\u7F16\u53F7",minWidth:180,colKey:"code"},{title:"\u5355\u636E\u6807\u9898",minWidth:180,colKey:"title"},{title:"\u5355\u636E\u7C7B\u522B",minWidth:180,colKey:"type"},{title:"\u7533\u8BF7\u4EBA",minWidth:180,colKey:"applicat"},{title:"\u7533\u8BF7\u65F6\u95F4",minWidth:300,colKey:"applicationTime"},{title:"\u5B8C\u6210\u65F6\u95F4",minWidth:300,colKey:"finishTime"},{title:"\u6D41\u7A0B\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(s,{row:i})=>{const h={1:{label:"\u7533\u8BF7\u4E2D"},2:{label:"\u5DF2\u5B8C\u6210"},3:{label:"\u5DF2\u5173\u95ED"}};return s("span",{class:`status-dot status-dot-${i.status}`},h[i.status].label)}},{align:"left",fixed:"right",width:110,colKey:"op",title:"\u64CD\u4F5C"}],le={class:"baseList"},ue={class:"tableBoxs"},ne={key:0},se={key:1},oe={key:2},ie={class:"operateCon"},de=["onClick"],re=["onClick"],ce="index",pe=T({__name:"TableList",props:{listData:{type:Object,default:()=>[]},total:{type:Number,default:0},pagination:{type:Object,default:()=>({})},dataLoading:{type:Boolean,default:!1}},emits:["handleOpen","getCurrent"],setup(s,{emit:i}){const h=L(),y=t=>{t.type===1?h.push({path:"/active/applyDetails",query:{assigneeId:t.assigneeId,code:t.code,taskId:t.id,path:"apply"}}):t.type===2?console.log(t.type):h.push({path:"/active/checkDetails",query:{assigneeId:t.assigneeId,code:t.code,taskId:t.id,path:"apply"}})},g=t=>{i("getCurrent",t)},F=t=>{t.type===1&&t.status===1&&t.flowStatus<=5&&i("handleOpen",t),t.type===3&&t.status===1&&i("handleOpen",t)};return(t,c)=>{const p=m("t-table"),a=m("t-pagination");return _(),C("div",le,[v("div",ue,[u(p,{data:s.listData,columns:w(ae),"row-key":ce,"vertical-align":"middle",hover:!0,loading:s.dataLoading,"table-layout":"fixed","table-content-width":"100%"},{rowIndex:n(({rowIndex:e})=>[N($(e+1),1)]),type:n(({row:e})=>[e.type===1?(_(),C("span",ne,"\u9000\u4F4F")):e.type===2?(_(),C("span",se,"\u8BF7\u5047")):(_(),C("span",oe,"\u5165\u4F4F"))]),finishTime:n(({row:e})=>[N($(e.finishTime?e.finishTime:"--"),1)]),op:n(({row:e})=>[v("div",ie,[v("a",{class:H(["font-bt",e.status===2||e.status===3||e.status===1&&e.flowStatus>5?"disabled":""]),onClick:d=>F(e)},"\u64A4\u9500",10,de),v("a",{class:"font-bt",onClick:d=>y(e)},"\u67E5\u770B",8,re)])]),empty:n(()=>[u(te)]),_:1},8,["data","columns","loading"]),f(" \u5206\u9875 "),s.total>10?(_(),z(a,{key:0,modelValue:s.pagination.pageNum,"onUpdate:modelValue":c[0]||(c[0]=e=>s.pagination.pageNum=e),pageSize:s.pagination.pageSize,"onUpdate:pageSize":c[1]||(c[1]=e=>s.pagination.pageSize=e),total:s.total,onChange:g},null,8,["modelValue","pageSize","total"])):f("v-if",!0),f(" end ")])])}}});var me=V(pe,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/TableList.vue"]]);const fe={class:"formBox"},ve=T({__name:"SearchForm",props:{searchData:{type:Object,default:()=>({})}},emits:["handleSearch","handleReset","handleClear"],setup(s,{emit:i}){const h=r(null),y=r([]),g=()=>{y.value=[],h.value.reset(),i("handleReset")},F=()=>{i("handleSearch",y.value)},t=(p,a)=>{a.trigger==="clear"&&i("handleClear",a.trigger)},c=p=>{i("handleClear",p)};return(p,a)=>{const e=m("t-input"),d=m("t-form-item"),b=m("t-col"),B=m("t-option"),S=m("t-select"),D=m("t-date-range-picker"),A=m("t-row"),x=m("t-form");return _(),C("div",fe,[u(x,{ref_key:"form",ref:h,model:s.searchData,"label-width":98},{default:n(()=>[u(A,null,{default:n(()=>[u(b,null,{default:n(()=>[u(d,{label:"\u5355\u636E\u7F16\u53F7\uFF1A",name:"code"},{default:n(()=>[u(e,{modelValue:s.searchData.code,"onUpdate:modelValue":a[0]||(a[0]=o=>s.searchData.code=o),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:a[1]||(a[1]=o=>c("code"))},null,8,["modelValue"])]),_:1})]),_:1}),u(b,null,{default:n(()=>[u(d,{label:"\u5355\u636E\u7C7B\u522B\uFF1A",name:"type"},{default:n(()=>[u(S,{modelValue:s.searchData.type,"onUpdate:modelValue":a[2]||(a[2]=o=>s.searchData.type=o),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",onClear:a[3]||(a[3]=o=>c("type"))},{default:n(()=>[(_(!0),C(K,null,R(w(U),(o,k)=>(_(),z(B,{key:k,value:o.id,label:o.value,title:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(b,null,{default:n(()=>[u(d,{label:"\u7533\u8BF7\u65F6\u95F4\uFF1A",name:"applicationTime"},{default:n(()=>[u(D,{modelValue:y.value,"onUpdate:modelValue":a[4]||(a[4]=o=>y.value=o),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],clearable:"",onChange:t},null,8,["modelValue"])]),_:1})]),_:1}),f(" \u6309\u94AE\u533A\u57DF "),u(b,{class:"searchBtn"},{default:n(()=>[v("button",{type:"button",class:"bt-grey wt-60",onClick:a[5]||(a[5]=o=>g())}," \u91CD\u7F6E "),v("button",{type:"button",class:"bt wt-60",onClick:a[6]||(a[6]=o=>F())}," \u641C\u7D22 ")]),_:1})]),_:1})]),_:1},8,["model"])])}}});var he=V(ve,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/SearchForm.vue"]]);const ye={class:"dialog-form"},_e={class:"dialogCenter"},ge=v("div",null,[v("button",{class:"bt bt-grey wt-60",type:"reset"},"\u53D6\u6D88"),v("button",{theme:"primary",type:"submit",class:"bt wt-60"},[v("span",null,"\u786E\u5B9A")])],-1),be=T({__name:"applyClass",props:{visible:{type:Boolean,default:!1}},emits:["handleClose"],setup(s,{expose:i,emit:h}){const y=s,g=L(),F=r("empty"),t=r(),c=r(!1),p=W(),a=r({}),e={status:[{required:!0,message:"\u5355\u636E\u7C7B\u522B\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u5355\u636E\u7C7B\u522B",type:"error",trigger:"change"}]};M(()=>y.visible,()=>{c.value=y.visible});const d=S=>{S.validateResult===!0&&(a.value.status===1?(B(),g.push({path:"/active/applyDetails"})):a.value.status===2?I.info("\u7A0B\u5E8F\u5C0F\u54E5\u54E5\u6B63\u5728\u5F00\u53D1\u4E2D!"):(B(),p.setEnterBaseData({}),g.push({path:"/active/checkDetails"})))},b=()=>{t.value.reset()},B=()=>{b(),h("handleClose")};return i({handleClear:b}),(S,D)=>{const A=m("t-radio"),x=m("t-radio-group"),o=m("t-form-item"),k=m("t-form"),j=m("t-dialog");return _(),C("div",ye,[u(j,{visible:c.value,"onUpdate:visible":D[1]||(D[1]=E=>c.value=E),header:"\u9009\u62E9\u7533\u8BF7\u5355\u636E\u7C7B\u522B",footer:!1,"on-close":B},{body:n(()=>[f(" \u8868\u5355\u5185\u5BB9 "),v("div",_e,[u(k,{ref_key:"form",ref:t,data:a.value,rules:e,"label-width":108,"on-cancel":"onClickCloseBtn","reset-type":F.value,onReset:B,onSubmit:d},{default:n(()=>[u(o,{label:"\u5355\u636E\u7C7B\u522B\uFF1A",name:"status"},{default:n(()=>[u(x,{modelValue:a.value.status,"onUpdate:modelValue":D[0]||(D[0]=E=>a.value.status=E)},{default:n(()=>[(_(!0),C(K,null,R(w(U),(E,l)=>(_(),z(A,{key:l,value:E.id},{default:n(()=>[N($(E.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(o,{class:"dialog-footer"},{default:n(()=>[ge]),_:1})]),_:1},8,["data","reset-type"])])]),_:1},8,["visible"])])}}});var Ce=V(be,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/applyClass.vue"]]);const Fe={class:"min-h subscribe bg-wt"},Be={class:"marg-main newBox"},De=T({__name:"index",setup(s){const i=r([]),h=r(!1),y=r(0),g=r(!1),F=r(""),t=r(""),c=r(!1),p=r(""),a=r(null),e=r({pageSize:10,pageNum:1});q(()=>{d()});const d=async()=>{h.value=!1;try{const l=await X(e.value);i.value=l.data.records,y.value=Number(l.data.total)}finally{h.value=!1}},b=l=>{e.value.pageNum=1,l.length>0&&(e.value.startTime=G(l[0]),e.value.endTime=J(l[1])),d()},B=()=>{e.value={pageSize:10,pageNum:1},a.value.currentId=0,d()},S=l=>{e.value.pageNum=1,l>=0&&(e.value.status=l),e.value.startTime="",e.value.endTime="",d()},D=l=>{e.value.pageNum=l.current,e.value.pageSize=l.pageSize,d()},A=async()=>{if(p.value.type===1){const l={retreatCode:p.value.code,taskId:p.value.id};(await Y(l)).code===200&&(I.success("\u64CD\u4F5C\u6210\u529F"),k(),d())}else if(p.value.type===2)console.log("\u8BF7\u5047");else{const l={id:Number(p.value.checkInId),taskId:p.value.id};(await Z(l)).code===200&&(I.success("\u64CD\u4F5C\u6210\u529F"),k(),d())}},x=()=>{c.value=!0},o=l=>{p.value=l,F.value="\u786E\u8BA4\u64A4\u9500",t.value="\u64A4\u9500\u5DF2\u63D0\u4EA4\u4FE1\u606F",g.value=!0},k=()=>{g.value=!1},j=()=>{c.value=!1},E=l=>{l==="code"?delete e.value.code:l==="applicat"?delete e.value.applicat:l==="type"?delete e.value.type:(delete e.value.startTime,delete e.value.endTime),e.value={...e.value},d()};return(l,O)=>(_(),C("div",Fe,[f(" \u7B5B\u9009\u533A\u57DF "),u(he,{"search-data":e.value,onHandleClear:E,onHandleSearch:b,onHandleReset:B},null,8,["search-data"]),f(" end "),f(" tab\u5BFC\u822A "),v("div",Be,[u(ee,{ref_key:"tabBar",ref:a,data:w(Q),onChangeId:S},null,8,["data"]),v("div",{class:"tabBtn"},[v("button",{class:"bt wt-120",onClick:x},"\u53D1\u8D77\u7533\u8BF7")])]),f(" \u8868\u683C "),u(me,{"list-data":i.value,pagination:e.value,total:y.value,onHandleOpen:o,onGetCurrent:D},null,8,["list-data","pagination","total"]),f(" end "),f(" \u9009\u62E9\u7533\u8BF7\u7C7B\u522B "),u(Ce,{visible:c.value,onHandleClose:j},null,8,["visible"]),f(" end "),f(" \u64CD\u4F5C\u5F39\u5C42 "),u(P,{visible:g.value,title:F.value,text:t.value,onHandleDelete:A,onHandleClose:k},null,8,["visible","title","text"]),f(" end ")]))}});var Ve=V(De,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/index.vue"]]);export{Ve as default};
