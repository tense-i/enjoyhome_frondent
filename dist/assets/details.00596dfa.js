import{d as P,r as c,V as xe,H as de,e as D,f as n,i as v,j as l,w as F,k as e,h as u,B as w,l as E,A as s,_ as Y,M as H,o as se,F as M,D as K,g as G,W as Te,z as ue,R as U,X as Le,n as ce,c as Ie,b as Ue,C as he,T as Ne}from"./index.2854391f.js";import{g as Z,i as be}from"./date.f423aacf.js";import{q as Re,i as je,g as Oe,j as Me}from"./commonData.fd496339.js";import{a as ze,u as qe,b as He,c as Ge,e as Pe,r as Ye,t as Ke,d as Je}from"./synergy.b2de5250.js";import{b as We,g as Xe}from"./oldMan.42b20d2e.js";import{N as Ze}from"./index.be6ad7be.js";import{a as Qe,A as De}from"./index.37613fad.js";const eu=[{colKey:"row-select",type:"single",width:30},{title:"\u5E8F\u53F7",align:"left",width:50,minWidth:50,colKey:"rowIndex"},{title:"\u8001\u4EBA\u59D3\u540D",colKey:"name",width:120},{title:"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7",width:200,colKey:"idCardNo"},{align:"left",width:94,colKey:"bedNo",title:"\u5E8A\u4F4D\u53F7"}],uu={class:"dialogBox tableDialog oldSelectDialog"},au={class:"dialogCenter"},tu={class:"searchBtn"},lu=e("span",null,"\u53D6\u6D88",-1),su=[lu],ou=e("span",null,"\u786E\u5B9A",-1),nu=[ou],iu=P({__name:"OldManSelect",props:{dialogData:{type:Array,default:()=>[]},dialogVisible:{type:Boolean,default:!1},pagination:{type:Object,default:()=>({})},dataLoading:{type:Boolean,default:!1},formData:{type:Object,default:()=>({})}},emits:["handleCloseDialog","getCurrent","gitList","handleSelectOld","handleSearch","handleReset"],setup(t,{emit:k}){const C=t,o=c(),S=c(null),d=c(!1),m=c([]),_=xe({});de(C,b=>{d.value=b.dialogVisible,d.value&&b.formData.elderId!==void 0&&(m.value=[b.formData.elderId])});const A=async()=>{m.value.length===0?H.error("\u672A\u9009\u62E9\u8001\u4EBA\uFF0C\u8BF7\u9009\u62E9\u8001\u4EBA\u4FE1\u606F"):(k("handleSelectOld",_.value),i())},i=()=>{S.value.reset(),m.value=[],k("handleCloseDialog")},$=(b,{selectedRowData:B})=>{m.value=b,_.value=B},r=b=>{k("getCurrent",b)},N=()=>{k("handleSearch")},g=()=>{S.value.reset(),k("handleReset")};return(b,B)=>{const a=D("t-input"),V=D("t-form-item"),I=D("t-col"),y=D("t-row"),T=D("t-form"),q=D("t-table"),J=D("t-dialog");return n(),v("div",uu,[l(J,{visible:d.value,"onUpdate:visible":B[4]||(B[4]=f=>d.value=f),header:"\u9009\u62E9\u8001\u4EBA","on-close":i,"on-confirm":A,footer:!1,onCloseBtnClick:i},{default:F(()=>[e("div",au,[u(" \u641C\u7D22 "),l(T,{ref_key:"ruleForm",ref:S,data:t.pagination,"label-width":80},{default:F(()=>[l(y,null,{default:F(()=>[l(I,{span:12},{default:F(()=>[l(y,null,{default:F(()=>[l(I,{span:4},{default:F(()=>[l(V,{label:"\u8001\u4EBA\u59D3\u540D\uFF1A",name:"name"},{default:F(()=>[l(a,{modelValue:t.pagination.name,"onUpdate:modelValue":B[0]||(B[0]=f=>t.pagination.name=f),class:"form-item-content",clearable:"",type:"search",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1}),l(I,{span:5},{default:F(()=>[l(V,{label:"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7\uFF1A",name:"idCardNo",class:"label-wt"},{default:F(()=>[l(a,{modelValue:t.pagination.idCardNo,"onUpdate:modelValue":B[1]||(B[1]=f=>t.pagination.idCardNo=f),class:"form-item-content",clearable:"",type:"search",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1}),l(I,{span:3},{default:F(()=>[u(" \u6309\u94AE\u533A\u57DF "),e("div",tu,[e("button",{class:"bt-grey wt-60",onClick:B[2]||(B[2]=f=>g())}," \u91CD\u7F6E "),e("button",{class:"bt wt-60",onClick:B[3]||(B[3]=f=>N())}," \u641C\u7D22 ")])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),u(" end "),u(" table \u6570\u636E "),l(q,{ref_key:"regTable",ref:o,"row-key":"elderId",data:t.dialogData,columns:w(eu),pagination:t.pagination.total>5?t.pagination:null,"disable-data-page":t.pagination.total<=5,loading:t.dataLoading,"cell-empty-content":"-","selected-row-keys":m.value,onPageChange:r,onSelectChange:$},{rowIndex:F(({rowIndex:f})=>[E(s(f+1),1)]),empty:F(()=>[l(Ze)]),_:1},8,["data","columns","pagination","disable-data-page","loading","selected-row-keys"]),u(" end "),u(" \u5E95\u90E8\u6309\u94AE "),e("div",{class:"dialog-footer"},[e("button",{theme:"primary",type:"submit",class:"bt-grey wt-60",onClick:i},su),e("button",{theme:"primary",type:"submit",class:"bt wt-60",onClick:A},nu)]),u(" end ")])]),_:1},8,["visible"])])}}});var ru=Y(iu,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/OldManSelect.vue"]]);const cu={class:"dialog-form"},du={class:"nickname"},vu=P({__name:"ApplyForm",props:{baseData:{type:Object,default:()=>({})}},setup(t,{expose:k}){const C=t,o=c("empty"),S=c(),d=c(!1),m=c(!1),_=c(!1),A=c([]),i=c({pageSize:5,pageNum:1}),$=c(""),r=c({checkOutTime:new Date}),N={name:[{required:!0,message:"\u8001\u4EBA\u59D3\u540D\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u8001\u4EBA\u59D3\u540D",type:"error",trigger:"change"}],checkOutTime:[{required:!0,message:"\u9000\u4F4F\u65E5\u671F\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u9000\u4F4F\u65E5\u671F",type:"error",trigger:"change"}],reason:[{required:!0,message:"\u9000\u4F4F\u539F\u56E0\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u9000\u4F4F\u539F\u56E0",type:"error",trigger:"change"}]};se(()=>{C.baseData.retreat&&(r.value=C.baseData.retreat,$.value=`${Z(r.value.checkInStartTime)}~${Z(r.value.checkInEndTime)}`)});const g=async()=>{const R=await We(i.value);R.code===200&&(A.value=R.data.records,i.value.total=Number(R.data.total))},b=()=>{i.value.pageNum=1,g()},B=()=>{i.value={pageSize:5,pageNum:1},g()},a=()=>{d.value=!0,m.value=!0,_.value=!0,g()},V=R=>{setTimeout(function(){d.value=!1,m.value=!1},200)},I=()=>{r.value.checkOutTime=new Date},y=()=>{I()},T=()=>{if(r.value.remark.length>100){const h=Te(r.value.remark,100);r.value.remark=h}},q=()=>{_.value=!1,i.value={pageSize:5,pageNum:1}},J=R=>{i.value.pageNum=R.current,i.value.pageSize=R.pageSize,g()},f=R=>{const h=R[0];r.value.name=h.name,r.value.bedNo=h.bedNo,r.value.checkInEndTime=h.checkInEndTime,r.value.checkInStartTime=h.checkInStartTime,$.value=`${Z(h.checkInStartTime)}~${Z(h.checkInEndTime)}`,r.value.contractName=h.contractName,r.value.contractUrl=h.contractUrl,r.value.contractNo=h.contractNo,r.value.counselor=h.counselor,r.value.nursingName=h.nursingName,r.value.id=h.id,r.value.elderId=h.elderId,r.value.idCardNo=h.idCardNo,r.value.phone=h.phone,r.value.nursingLevelName=h.nursingLevelName};return k({form:S,formData:r,handleClear:I}),(R,h)=>{const z=D("t-icon"),O=D("t-input"),L=D("t-form-item"),ae=D("t-card"),ve=D("t-date-picker"),ie=D("t-option"),Q=D("t-select"),W=D("t-textarea"),ee=D("t-form");return n(),v(M,null,[e("div",cu,[u(" \u57FA\u672C\u4FE1\u606F "),l(ee,{ref_key:"form",ref:S,data:r.value,rules:N,"label-width":88,"on-cancel":"onClickCloseBtn","reset-type":o.value,onReset:y},{default:F(()=>[l(ae,{title:"\u57FA\u672C\u4FE1\u606F"},{default:F(()=>[l(L,{label:"\u8001\u4EBA\u59D3\u540D\uFF1A",name:"name"},{default:F(()=>[l(O,{modelValue:r.value.name,"onUpdate:modelValue":h[0]||(h[0]=x=>r.value.name=x),placeholder:"\u8BF7\u9009\u62E9",class:"wt-300",readonly:m.value,onFocus:a,onBlur:V},{suffixIcon:F(()=>[l(z,{name:d.value?"chevron-up":"chevron-down"},null,8,["name"])]),_:1},8,["modelValue","readonly"])]),_:1}),l(L,{label:"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7\uFF1A",class:"label-wt",name:"idCardNo"},{default:F(()=>[l(O,{modelValue:r.value.idCardNo,"onUpdate:modelValue":h[1]||(h[1]=x=>r.value.idCardNo=x),placeholder:"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u8054\u7CFB\u65B9\u5F0F\uFF1A",name:"phone"},{default:F(()=>[l(O,{modelValue:r.value.phone,"onUpdate:modelValue":h[2]||(h[2]=x=>r.value.phone=x),placeholder:"\u8054\u7CFB\u65B9\u5F0F",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u8D39\u7528\u671F\u9650\uFF1A",class:"label-wt"},{default:F(()=>[l(O,{modelValue:$.value,"onUpdate:modelValue":h[3]||(h[3]=x=>$.value=x),placeholder:"\u8D39\u7528\u671F\u9650",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u62A4\u7406\u7B49\u7EA7\uFF1A",name:"nursingLevelName"},{default:F(()=>[l(O,{modelValue:r.value.nursingLevelName,"onUpdate:modelValue":h[4]||(h[4]=x=>r.value.nursingLevelName=x),placeholder:"\u62A4\u7406\u7B49\u7EA7",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u5165\u4F4F\u5E8A\u4F4D\uFF1A",class:"label-wt",name:"bedNo"},{default:F(()=>[l(O,{modelValue:r.value.bedNo,"onUpdate:modelValue":h[5]||(h[5]=x=>r.value.bedNo=x),placeholder:"\u5165\u4F4F\u5E8A\u4F4D",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u7B7E\u7EA6\u5408\u540C\uFF1A",name:"contractName"},{default:F(()=>[l(O,{modelValue:r.value.contractName,"onUpdate:modelValue":h[6]||(h[6]=x=>r.value.contractName=x),placeholder:"\u7B7E\u7EA6\u5408\u540C",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u517B\u8001\u987E\u95EE\uFF1A",class:"label-wt",name:"counselor"},{default:F(()=>[l(O,{modelValue:r.value.counselor,"onUpdate:modelValue":h[7]||(h[7]=x=>r.value.counselor=x),placeholder:"\u517B\u8001\u987E\u95EE",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1}),l(L,{label:"\u62A4\u7406\u5458\uFF1A",name:"nursingName"},{default:F(()=>[l(O,{modelValue:r.value.nursingName,"onUpdate:modelValue":h[8]||(h[8]=x=>r.value.nursingName=x),placeholder:"\u62A4\u7406\u5458",class:"wt-300",disabled:!0},null,8,["modelValue"])]),_:1})]),_:1}),u(" \u7533\u8BF7\u4FE1\u606F "),l(ae,{title:"\u7533\u8BF7\u4FE1\u606F"},{default:F(()=>[l(L,{label:"\u9000\u4F4F\u65E5\u671F\uFF1A",name:"checkOutTime"},{default:F(()=>[l(ve,{modelValue:r.value.checkOutTime,"onUpdate:modelValue":h[9]||(h[9]=x=>r.value.checkOutTime=x),placeholder:"\u8BF7\u9009\u62E9",class:"wt-300"},null,8,["modelValue"])]),_:1}),l(L,{label:"\u9000\u4F4F\u539F\u56E0\uFF1A",name:"reason"},{default:F(()=>[l(Q,{modelValue:r.value.reason,"onUpdate:modelValue":h[10]||(h[10]=x=>r.value.reason=x),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",class:"wt-300"},{default:F(()=>[(n(!0),v(M,null,K(w(Re),(x,Fe)=>(n(),G(ie,{key:Fe,value:x.value,label:x.value,title:""},{default:F(()=>[E(s(x.value),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(L,{label:"\u5907\u6CE8\uFF1A",name:"remark",class:"lastText"},{default:F(()=>[l(W,{modelValue:r.value.remark,"onUpdate:modelValue":h[11]||(h[11]=x=>r.value.remark=x),placeholder:"\u8BF7\u8F93\u5165",class:"t-textarea",name:"description",maxlength:100,clearable:"",onChange:T},{suffix:F(()=>[e("span",du,[e("span",null,s(r.value.remark?r.value.remark.length:0),1),E("/100")])]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(" end ")]),_:1},8,["data","reset-type"]),u(" end ")]),u(" \u8001\u4EBA\u9009\u62E9\u5F39\u5C42 "),l(ru,{"dialog-visible":_.value,"dialog-data":A.value,pagination:i.value,formData:r.value,onHandleSearch:b,onHandleReset:B,onHandleCloseDialog:q,onGetCurrent:J,onHandleSelectOld:f},null,8,["dialog-visible","dialog-data","pagination","formData"]),u(" end ")],64)}}});var pe=Y(vu,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/ApplyForm.vue"]]);const Fu={class:"applyBaseInfo appluW"},mu={class:"applyRecord"},_u=e("div",{class:"titRecord"},"\u64CD\u4F5C\u8BB0\u5F55",-1),fu=P({__name:"ApplyApproval",props:{title:{type:String,default:""},baseData:{type:Object,default:()=>({})},active:{type:Number,default:0}},setup(t){return(k,C)=>{const o=D("t-card");return n(),v("div",Fu,[u(" \u5BA1\u6279\u7ED3\u679C "),l(o,{title:t.title},{default:F(()=>[l(Qe,{"base-data":t.baseData},null,8,["base-data"]),e("div",mu,[_u,l(De,{"base-data":t.baseData},null,8,["base-data"])])]),_:1},8,["title"]),u(" end ")])}}});var ne=Y(fu,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/ApplyApproval.vue"]]);const hu={class:"dialog-form"},bu={key:0,class:"fillCon"},pu={class:"titleInfo"},Du=e("div",{class:"lText"},"\u5E94\u9000",-1),Bu={class:"rText"},Eu={class:"itemCon"},Au={key:0},Cu={class:"fist wt-100"},gu={class:"lText"},yu=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),$u=e("span",{class:"bt-small"},"\u6708\u5EA6\u8D26\u5355",-1),Vu=e("label",null,"\u8D26\u5355\u6708\u4EFD\uFF1A",-1),ku=e("label",null,"\u53EF\u9000\u91D1\u989D\uFF1A",-1),wu=e("label",null,"\u5B9E\u9645\u5929\u6570\uFF1A",-1),Su=e("label",null,"\u9000\u6B3E\u5929\u6570\uFF1A",-1),xu=e("label",null,"\u5B9E\u9000\u91D1\u989D\uFF1A",-1),Tu={class:"wt-100"},Lu=e("label",null,"\u8C03\u6574\u5907\u6CE8\uFF1A",-1),Iu={key:1,class:"bg"},Uu={class:"fist wt-100"},Nu={class:"lText"},Ru=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),ju=e("span",{class:"bt-small warBtn"},"\u8D39\u7528\u8D26\u5355",-1),Ou=e("label",null,"\u62A4\u7406\u9879\u76EE\u540D\u79F0\uFF1A",-1),Mu=e("label",null,"\u53EF\u9000\u91D1\u989D\uFF1A",-1),zu={key:1,class:"fillCon"},qu={class:"titleInfo"},Hu=e("div",{class:"lText"},"\u6B20\u8D39",-1),Gu={class:"rText"},Pu={class:"itemCon"},Yu={class:"fist wt-100"},Ku={class:"lText"},Ju=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),Wu={class:"bt-small"},Xu=e("label",null,"\u8D26\u5355\u6708\u4EFD\uFF1A",-1),Zu=e("label",null,"\u5E94\u4ED8\u91D1\u989D\uFF1A",-1),Qu={key:2,class:"fillCon"},ea={class:"titleInfo"},ua=e("div",{class:"lText"},"\u4F59\u989D",-1),aa={class:"rText"},ta={class:"itemCon"},la=e("label",null,"\u53EF\u9000\u62BC\u91D1\uFF1A",-1),sa=e("label",null,"\u5B9E\u9000\u91D1\u989D\uFF1A",-1),oa={class:"fist wt-100"},na=e("label",null,"\u8C03\u6574\u5907\u6CE8\uFF1A",-1),ia={class:"bg"},ra=e("label",null,"\u9884\u7F34\u6B3E\uFF1A",-1),ca={class:"total"},da=P({__name:"ApproveBill",props:{baseData:{type:Object,default:()=>({})},active:{type:Number,default:0}},setup(t){const k=t,C=ue(()=>{const m=k.baseData.retreatBillVo;let _=0;return m&&m.dueBackList.length>0&&m.dueBackList.forEach(A=>{A.type===1&&(A.realAmount=A.amount),_+=A.realAmount}),_}),o=ue(()=>{const m=k.baseData.retreatBillVo;let _=0;return m.balanceVo&&(_=m.balanceVo.arrearsAmount+m.balanceVo.prepaidBalance),_}),S=ue(()=>{const m=k.baseData.retreatBillVo;let _=0;return m&&m.arrearageList.length>0&&m.arrearageList.forEach(A=>{_+=A.amount}),_}),d=ue(()=>{let m=0;return m=U(C.value-S.value+o.value),m});return(m,_)=>{const A=D("t-card");return n(),v("div",hu,[u(" \u57FA\u672C\u4FE1\u606F "),t.baseData.retreatBillVo?(n(),G(A,{key:0,title:"\u8D26\u5355\u660E\u7EC6"},{default:F(()=>[u(" \u9000\u8D39 "),t.baseData.retreatBillVo.dueBackList.length>0?(n(),v("div",bu,[e("div",pu,[Du,e("div",Bu,[e("span",null,"\u5F85\u529E\uFF1A"+s(t.baseData.retreatBillVo.dueBackList.length),1),e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(C.value))+"\u5143",1)])]),e("div",Eu,[(n(!0),v(M,null,K(t.baseData.retreatBillVo.dueBackList,(i,$)=>(n(),v("div",{key:$},[i.type===0?(n(),v("ul",Au,[e("li",Cu,[e("div",gu,[yu,E(s(i.code),1),$u])]),e("li",null,[Vu,E(s(i.billMonth),1)]),e("li",null,[ku,E(s(w(U)(i.amount))+"\u5143 ",1)]),e("li",null,[wu,E(s(i.realDay)+"\u5929",1)]),e("li",null,[Su,E(s(i.dueBackDay)+"\u5929",1)]),e("li",null,[xu,E(s(w(U)(i.realAmount))+"\u5143 ",1)]),e("li",Tu,[Lu,E(" "+s(i.remark?i.remark:"\u65E0"),1)])])):u("v-if",!0),i.type===1?(n(),v("ul",Iu,[e("li",Uu,[e("div",Nu,[Ru,E(s(i.code),1),ju])]),e("li",null,[Ou,E(s(i.nursingName),1)]),e("li",null,[Mu,E(s(w(U)(i.amount))+"\u5143 ",1)])])):u("v-if",!0)]))),128))])])):u("v-if",!0),u(" end "),u(" \u6B20\u8D39 "),t.baseData.retreatBillVo.arrearageList.length>0?(n(),v("div",zu,[e("div",qu,[Hu,e("div",Gu,[e("span",null,"\u5F85\u529E\uFF1A"+s(t.baseData.retreatBillVo.arrearageList.length),1),e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(S.value))+"\u5143",1)])]),e("div",Pu,[(n(!0),v(M,null,K(t.baseData.retreatBillVo.arrearageList,(i,$)=>(n(),v("ul",{key:$,class:"bg"},[e("li",Yu,[e("div",Ku,[Ju,E(s(i.code),1),e("span",Wu,s(i.type===0?"\u6708\u5EA6\u8D26\u5355":"\u8BA2\u5355"),1)])]),e("li",null,[Xu,E(s(i.billMonth),1)]),e("li",null,[Zu,E(s(w(U)(i.amount))+"\u5143 ",1)])]))),128))])])):u("v-if",!0),u(" end "),u(" \u4F59\u989D "),t.baseData.retreatBillVo.balanceVo?(n(),v("div",Qu,[e("div",ea,[ua,e("div",aa,[e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(o.value))+"\u5143",1)])]),e("div",ta,[e("ul",null,[e("li",null,[la,E(s(t.baseData.retreatBillVo.balanceVo.depositAmount)+"\u5143 ",1)]),e("li",null,[sa,E(s(w(U)(t.baseData.retreatBillVo.balanceVo.arrearsAmount))+"\u5143 ",1)]),e("li",oa,[na,E(s(t.baseData.retreatBillVo.balanceVo.description?t.baseData.retreatBillVo.balanceVo.description:"\u65E0"),1)])]),e("ul",ia,[e("li",null,[ra,E(s(w(U)(t.baseData.retreatBillVo.balanceVo.prepaidBalance))+"\u5143 ",1)])])])])):u("v-if",!0),u(" end "),e("div",ca," \u6700\u7EC8\u9000\u6B3E\u91D1\u989D = \u5E94\u9000 - \u6B20\u8D39 +\u4F59\u989D = "+s(d.value)+" \u5143 ",1)]),_:1})):u("v-if",!0),u(" end ")])}}});var va=Y(da,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/ApproveBill.vue"]]);const Fa={class:"info-block"},ma={class:"info-item"},_a=e("h1",{class:"label-wt-long"},"\u5355\u636E\u7F16\u53F7\uFF1A",-1),fa={class:"info-item"},ha=e("h1",null,"\u8001\u4EBA\u59D3\u540D\uFF1A",-1),ba={class:"info-item"},pa=e("h1",{class:"label-wt-long"},"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7\uFF1A",-1),Da={class:"info-item"},Ba=e("h1",null,"\u8054\u7CFB\u65B9\u5F0F\uFF1A",-1),Ea={class:"info-item"},Aa=e("h1",{class:"label-wt-long"},"\u8D39\u7528\u671F\u9650\uFF1A",-1),Ca={class:"info-item"},ga=e("h1",null,"\u62A4\u7406\u7B49\u7EA7\uFF1A",-1),ya={class:"info-item"},$a=e("h1",{class:"label-wt-long"},"\u5165\u4F4F\u5E8A\u4F4D\uFF1A",-1),Va={class:"info-item"},ka=e("h1",null,"\u7B7E\u7EA6\u5408\u540C\uFF1A",-1),wa={class:"font-bt"},Sa=["href"],xa={class:"info-item"},Ta=e("h1",{class:"label-wt-long"},"\u517B\u8001\u987E\u95EE\uFF1A",-1),La={class:"info-item"},Ia=e("h1",null,"\u62A4\u7406\u5458\uFF1A",-1),Ua={class:"info-block"},Na={class:"info-item"},Ra=e("h1",null,"\u9000\u4F4F\u65E5\u671F\uFF1A",-1),ja={class:"info-item"},Oa=e("h1",null,"\u9000\u4F4F\u539F\u56E0\uFF1A",-1),Ma={class:"info-item"},za=e("h1",null,"\u7533\u8BF7\u4EBA\uFF1A",-1),qa={class:"info-item"},Ha=e("h1",null,"\u7533\u8BF7\u65F6\u95F4\uFF1A",-1),Ga={class:"info-item wt-100"},Pa=e("h1",null,"\u5907\u6CE8\uFF1A",-1),Ya={class:"info-block"},Ka={class:"info-item"},Ja=e("h1",null,"\u63D0\u4EA4\u4EBA\uFF1A",-1),Wa={class:"info-item"},Xa=e("h1",null,"\u89E3\u9664\u65F6\u95F4\uFF1A",-1),Za={class:"info-item"},Qa=e("h1",null,"\u89E3\u9664\u534F\u8BAE\uFF1A",-1),et={class:"font-bt"},ut=["href"],at={class:"fillCon"},tt=e("div",{class:"titleInfo"},[e("div",{class:"lText"},"\u9000\u6B3E\u4FE1\u606F")],-1),lt={class:"info-block"},st={class:"info-item"},ot=e("h1",{class:""},"\u5269\u4F59\u9884\u7F34\u6B3E\uFF1A",-1),nt={key:0,class:"fillCon conBpd"},it=e("div",{class:"titleInfo"},[e("div",{class:"lText"},"\u9000\u6B3E\u51ED\u8BC1")],-1),rt={class:"info-block"},ct={class:"info-item"},dt=e("h1",null,"\u63D0\u4EA4\u4EBA\uFF1A",-1),vt={class:"info-item"},Ft=e("h1",null,"\u63D0\u4EA4\u65F6\u95F4\uFF1A",-1),mt={class:"info-item"},_t=e("h1",null,"\u9000\u6B3E\u65B9\u5F0F\uFF1A",-1),ft={class:"info-item wt-100"},ht=e("h1",null,"\u9000\u6B3E\u51ED\u8BC1\uFF1A",-1),bt={class:"info-item wt-100"},pt=e("h1",null,"\u9000\u6B3E\u5907\u6CE8\uFF1A",-1),Dt=P({__name:"ApplyBaseInfo",props:{baseData:{type:Object,default:()=>({})},active:{type:Number,default:0}},setup(t,{expose:k}){const C=t,o=c([{url:""}]);se(()=>{const d=C.baseData.retreatBill;d&&(o.value[0].url=d.refundVoucherUrl)});const S=c();return k({form:S}),(d,m)=>{const _=D("t-card"),A=D("t-upload");return n(),v(M,null,[u(" \u57FA\u672C\u4FE1\u606F "),l(_,{title:"\u57FA\u672C\u4FE1\u606F"},{default:F(()=>[e("div",Fa,[e("div",ma,[_a,e("span",null,s(t.baseData.retreat.retreatCode),1)]),e("div",fa,[ha,e("span",null,s(t.baseData.retreat.name),1)]),e("div",ba,[pa,e("span",null,s(t.baseData.retreat.idCardNo),1)]),e("div",Da,[Ba,e("span",null,s(t.baseData.retreat.phone),1)]),e("div",Ea,[Aa,e("span",null,s(w(Z)(t.baseData.retreat.checkInStartTime))+" ~ "+s(w(Z)(t.baseData.retreat.checkInEndTime)),1)]),e("div",Ca,[ga,e("span",null,s(t.baseData.retreat.nursingLevelName),1)]),e("div",ya,[$a,e("span",null,s(t.baseData.retreat.bedNo)+"\u5E8A\u4F4D",1)]),e("div",Va,[ka,e("span",null,[E(s(t.baseData.retreat.contractName),1),e("i",wa,[e("a",{class:"font-bt",href:t.baseData.retreat.contractUrl,target:"black"},"\u67E5\u770B",8,Sa)]),u(` <i\r
            class="font-bt"\r
            @click="\r
              handleDown(\r
                baseData.retreat.contractUrl,\r
                baseData.retreat.contractName\r
              )\r
            "\r
            >\u4E0B\u8F7D</i\r
          > `)])]),e("div",xa,[Ta,e("span",null,s(t.baseData.retreat.counselor?t.baseData.retreat.counselor:"\u65E0"),1)]),e("div",La,[Ia,e("span",null,s(t.baseData.retreat.nursingName?t.baseData.retreat.nursingName:"\u65E0"),1)])])]),_:1}),u(" end "),u(" \u7533\u8BF7\u4FE1\u606F "),l(_,{title:"\u7533\u8BF7\u4FE1\u606F"},{default:F(()=>[e("div",Ua,[e("div",Na,[Ra,e("span",null,s(w(Z)(t.baseData.retreat.checkOutTime)),1)]),e("div",ja,[Oa,e("span",null,s(t.baseData.retreat.reason),1)]),e("div",Ma,[za,e("span",null,s(t.baseData.retreat.applicat),1)]),e("div",qa,[Ha,e("span",null,s(t.baseData.retreat.createTime),1)]),e("div",Ga,[Pa,e("span",null,s(t.baseData.retreat.remark),1)])])]),_:1}),u(" end "),u(" \u89E3\u9664\u8BB0\u5F55 "),t.active>=2&&(t.baseData.retreat.flowStatus===3||t.baseData.retreat.flowStatus===4||t.baseData.retreat.flowStatus===5||t.baseData.retreat.flowStatus===6||t.baseData.retreat.status===3)?(n(),G(_,{key:0,title:"\u89E3\u9664\u8BB0\u5F55"},{default:F(()=>[e("div",Ya,[e("div",Ka,[Ja,e("span",null,s(t.baseData.rescissionContract.commitor),1)]),e("div",Wa,[Xa,e("span",null,s(w(Z)(t.baseData.rescissionContract.relieveTime)),1)]),e("div",Za,[Qa,e("span",null,[E(s(t.baseData.rescissionContract.rescissionContractName),1),e("i",et,[e("a",{class:"font-bt",href:t.baseData.rescissionContract.contractUrl,target:"black"},"\u67E5\u770B",8,ut)]),u(` <i\r
            class="font-bt"\r
            @click="\r
              handleDown(\r
                baseData.rescissionContract.contractUrl,\r
                baseData.rescissionContract.rescissionContractName\r
              )\r
            "\r
            >\u4E0B\u8F7D</i\r
          > `)])])])]),_:1})):u("v-if",!0),u(" end "),u(" \u8D26\u5355\u660E\u7EC6 "),(t.active===3||t.active===4||t.active===5)&&t.baseData.retreat.flowStatus!==3&&(t.baseData.retreatBillVo.arrearageList.length>0||t.baseData.retreatBillVo.balanceVo||t.baseData.retreatBillVo.dueBackList.length>0||t.baseData.retreatBillVo.unpaidList.length>0)?(n(),G(va,{key:1,active:t.active,"base-data":t.baseData},null,8,["active","base-data"])):u("v-if",!0),u(" end "),u(" \u5B8C\u6210\u8D26\u5355\u6E05\u7B97 "),t.active===6&&t.baseData.retreatBill&&t.baseData.retreat.flowStatus===6&&t.baseData.retreat.status===2?(n(),G(_,{key:2,title:"\u5B8C\u6210\u8D26\u5355\u6E05\u7B97"},{default:F(()=>[e("div",at,[tt,e("div",lt,[e("div",st,[ot,e("span",null,s(w(U)(t.baseData.retreatBill.refundAmount))+"\u5143",1)])])]),t.baseData.retreatBill.refundVoucherUrl!==void 0?(n(),v("div",nt,[it,e("div",rt,[e("div",ct,[dt,e("span",null,s(t.baseData.retreat.applicat),1)]),e("div",vt,[Ft,e("span",null,s(t.baseData.retreat.createTime),1)]),e("div",mt,[_t,e("span",null,s(t.baseData.retreatBill.tradingChannel),1)]),e("div",ft,[ht,e("span",null,[l(A,{ref:"uploadRef",modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=i=>o.value=i),action:"",theme:"image",disabled:!0},null,8,["modelValue"])])]),e("div",bt,[pt,e("span",null,s(t.baseData.retreatBill.remark),1)])])])):u("v-if",!0)]),_:1})):u("v-if",!0),u(" end ")],64)}}});var te=Y(Dt,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/ApplyBaseInfo.vue"]]);const Bt={class:"dialog-form"},Et=P({__name:"ContractForm",props:{baseData:{type:Object,default:()=>({})}},emits:["getVallidate"],setup(t,{expose:k,emit:C}){const o=c(),S=c(!0),d=c([]),m=c({size:60,unit:"MB",message:"\u56FE\u7247\u5927\u5C0F\u8D85\u8FC760m\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"}),_=c({time:new Date}),A={time:[{required:!0,message:"\u89E3\u9664\u65E5\u671F\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u89E3\u9664\u65E5\u671F",type:"error",trigger:"change"}],contractUrl:[{required:!0,message:"\u89E3\u9664\u534F\u8BAE\u4E3A\u7A7A\uFF0C\u8BF7\u4E0A\u4F20\u89E3\u9664\u534F\u8BAE",type:"error",trigger:"change"}]};de(_.value,b=>{b.time&&d.value.length>0&&C("getVallidate",!1)});const i=()=>{d.value=[],_.value.contractUrl=""},$=()=>{H.error("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25")},r=b=>{const B=b.response.data;_.value.contractUrl=B,d.value[0].response.url=B,d.value[0].url=B},N=b=>{const{files:B,type:a}=b,V={FILE_OVER_SIZE_LIMIT:B[0].response.error,FILES_OVER_LENGTH_LIMIT:"\u6587\u4EF6\u6570\u91CF\u8D85\u51FA\u9650\u5236\uFF0C\u4EC5\u4E0A\u4F20\u672A\u8D85\u51FA\u6570\u91CF\u7684\u6587\u4EF6",FILTER_FILE_SAME_NAME:"\u4E0D\u5141\u8BB8\u4E0A\u4F20\u540C\u540D\u6587\u4EF6",BEFORE_ALL_FILES_UPLOAD:"beforeAllFilesUpload \u65B9\u6CD5\u62E6\u622A\u4E86\u6587\u4EF6",CUSTOM_BEFORE_UPLOAD:"beforeUpload \u65B9\u6CD5\u62E6\u622A\u4E86\u6587\u4EF6"};V[a]&&H.warning(V[a])};return k({form:o,formData:_,handleClear:()=>{_.value.checkOutTime=new Date}}),(b,B)=>{const a=D("t-form-item"),V=D("t-date-picker"),I=D("t-upload"),y=D("t-card"),T=D("t-form");return n(),v("div",Bt,[u(" \u57FA\u672C\u4FE1\u606F "),l(T,{ref_key:"form",ref:o,data:_.value,rules:A,"label-width":88},{default:F(()=>[l(y,{title:"\u4E0A\u4F20\u89E3\u9664\u534F\u8BAE"},{default:F(()=>[l(a,{label:"\u5408\u540C\u7F16\u53F7\uFF1A"},{default:F(()=>[E(s(t.baseData.retreat.contractNo),1)]),_:1}),l(a,{label:"\u89E3\u9664\u65E5\u671F\uFF1A",class:"label-wt",name:"time"},{default:F(()=>[l(V,{modelValue:_.value.time,"onUpdate:modelValue":B[0]||(B[0]=q=>_.value.time=q),placeholder:"\u8BF7\u9009\u62E9",class:"wt-300"},null,8,["modelValue"])]),_:1}),l(a,{label:"\u89E3\u9664\u534F\u8BAE\uFF1A",name:"contractUrl"},{default:F(()=>[l(I,{ref:"uploadRef",modelValue:d.value,"onUpdate:modelValue":B[1]||(B[1]=q=>d.value=q),action:"api/common/upload",autoUpload:S.value,"size-limit":m.value,tips:"\u8BF7\u4E0A\u4F20pdf\u6587\u4EF6\uFF0C\u5927\u5C0F\u572860M\u4EE5\u5185",accept:".pdf",onRemove:i,onFail:$,onSuccess:r,onValidate:N},null,8,["modelValue","autoUpload","size-limit"])]),_:1})]),_:1})]),_:1},8,["data"]),u(" end ")])}}});var At=Y(Et,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/ContractForm.vue"]]);const Ct={class:"dialog-form"},gt={class:"contractTit"},yt=e("span",null,"\u8D26\u5355\u660E\u7EC6",-1),$t={class:"titTip"},Vt={key:0,class:"fillCon"},kt={class:"titleInfo"},wt=e("div",{class:"lText"},"\u5E94\u9000",-1),St={class:"rText"},xt={class:"itemCon"},Tt={class:"fist wt-100"},Lt={class:"lText"},It=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),Ut={class:"bt-small"},Nt={key:0},Rt=e("label",null,"\u8D26\u5355\u6708\u4EFD\uFF1A",-1),jt=e("label",null,"\u53EF\u9000\u91D1\u989D\uFF1A",-1),Ot={key:1},Mt=e("label",null,"\u5B9E\u9645\u5929\u6570\uFF1A",-1),zt={key:2},qt=e("label",null,"\u9000\u6B3E\u5929\u6570\uFF1A",-1),Ht={key:3},Gt=e("label",null,"\u5B9E\u9000\u91D1\u989D\uFF1A",-1),Pt={key:4,class:"wt-100"},Yt=e("label",null,"\u8C03\u6574\u5907\u6CE8\uFF1A",-1),Kt={key:5},Jt=e("label",null,"\u62A4\u7406\u9879\u76EE\u540D\u79F0\uFF1A",-1),Wt={key:1,class:"fillCon"},Xt={class:"titleInfo"},Zt=e("div",{class:"lText"},"\u6B20\u8D39",-1),Qt={class:"rText"},el={class:"itemCon"},ul={class:"fist wt-100"},al={class:"lText"},tl=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),ll={class:"bt-small"},sl=e("label",null,"\u8D26\u5355\u6708\u4EFD\uFF1A",-1),ol=e("label",null,"\u5E94\u4ED8\u91D1\u989D\uFF1A",-1),nl={class:"fillCon"},il={class:"titleInfo"},rl=e("div",{class:"lText"},"\u4F59\u989D",-1),cl={class:"rText"},dl={class:"itemCon"},vl={class:"fist wt-100"},Fl=e("label",null,"\u53EF\u9000\u62BC\u91D1\uFF1A",-1),ml=e("label",null,"\u5B9E\u9000\u91D1\u989D\uFF1A",-1),_l={class:"wt-100"},fl=e("label",null,"\u8C03\u6574\u5907\u6CE8\uFF1A",-1),hl=e("label",null,"\u9884\u7F34\u6B3E\uFF1A",-1),bl={key:2,class:"fillCon"},pl={class:"titleInfo"},Dl=e("div",{class:"lText"},"\u672A\u7F34",-1),Bl={class:"rText"},El={class:"itemCon"},Al={class:"fist wt-100"},Cl={class:"lText"},gl=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),yl=e("span",{class:"bt warBtn"},"\u8D39\u7528\u8D26\u5355",-1),$l=e("label",null,"\u62A4\u7406\u9879\u76EE\u540D\u79F0\uFF1A",-1),Vl=e("label",null,"\u5E94\u4ED8\u91D1\u989D\uFF1A",-1),kl={class:"total"},wl=P({__name:"AdjustBill",props:{baseData:{type:Object,default:()=>({})}},setup(t,{expose:k}){const C=t,o=c([]),S=c(0),d=c({}),m=c(0),_=c([]),A=c(0),i=c([]),$=c(0),r=c(0);se(()=>{o.value=C.baseData.retreatBillVo.arrearageList,d.value=C.baseData.retreatBillVo.balanceVo,_.value=C.baseData.retreatBillVo.dueBackList,i.value=C.baseData.retreatBillVo.unpaidList,d.value?(d.value.arrearsAmount=d.value.depositAmount,m.value=Number(d.value.arrearsAmount)+d.value.prepaidBalance):(d.value={},d.value.arrearsAmount=0,d.value.depositAmount=0,d.value.prepaidBalance=0),_.value.forEach(a=>{a.realAmount=a.amount,A.value+=Number(a.realAmount)}),o.value.forEach(a=>{S.value+=a.amount}),i.value.forEach(a=>{$.value+=a.amount}),b()});const N=a=>{a>d.value.depositAmount&&(H.error("\u5B9E\u9000\u91D1\u989D\u4E0D\u53EF\u5927\u4E8E\u53EF\u9000\u62BC\u91D1\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"),d.value.arrearsAmount=d.value.depositAmount),(d.value.arrearsAmount==="0.00"||d.value.arrearsAmount===void 0)&&(d.value.arrearsAmount=0),m.value=Number(d.value.arrearsAmount)+d.value.prepaidBalance,b()},g=a=>{A.value=0,_.value.forEach(V=>{a.code===V.code&&a.realAmount>V.amount&&(H.error("\u5B9E\u9000\u91D1\u989D\u4E0D\u53EF\u5927\u4E8E\u53EF\u9000\u91D1\u989D\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"),V.realAmount=V.amount),A.value+=Number(V.realAmount)}),b()},b=()=>{r.value=U(A.value-S.value+m.value)},B=a=>{Le(a)};return k({arrearageList:o,balanceVo:d,dueBackList:_,unpaidList:i,balanceSum:m,dueBackSum:A,arrearageSum:S,moneySum:r}),(a,V)=>{const I=D("t-icon"),y=D("t-input-number"),T=D("t-textarea"),q=D("t-card"),J=D("t-form");return n(),v("div",Ct,[u(" \u57FA\u672C\u4FE1\u606F "),l(J,{ref:"form","label-width":88},{default:F(()=>[l(q,{title:"\u8C03\u6574\u8D39\u7528\u8D26\u5355",class:"freeOrder"},{default:F(()=>[e("div",gt,[yt,e("span",$t,[l(I,{class:"warnIcon"}),E("\u63D0\u4EA4\u8D26\u5355\u5BA1\u6279\u524D\uFF0C\u9700\u5728\u5165\u8D26\u5217\u8868\u4E2D\u5904\u7406\u672A\u7F34\u8D26\u5355\uFF0C\u82E5\u672A\u5904\u7406\uFF0C\u5219\u65E0\u6CD5\u63D0\u4EA4")])]),u(" \u5E94\u9000 "),_.value.length>0?(n(),v("div",Vt,[e("div",kt,[wt,e("div",St,[e("span",null,"\u5F85\u529E\uFF1A"+s(_.value.length),1),e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(A.value))+"\u5143",1)])]),e("div",xt,[(n(!0),v(M,null,K(_.value,(f,R)=>(n(),v("ul",{key:R},[e("li",Tt,[e("div",Lt,[It,E(s(f.code),1),e("span",Ut,s(f.type===0?"\u6708\u5EA6\u8D26\u5355":"\u8D39\u7528\u8D26\u5355"),1)])]),f.type===0?(n(),v("li",Nt,[Rt,E(s(f.billMonth),1)])):u("v-if",!0),e("li",null,[jt,E(s(w(U)(f.amount))+"\u5143 ",1)]),f.type===0?(n(),v("li",Ot,[Mt,E(s(f.realDay)+"\u5929 ",1)])):u("v-if",!0),f.type===0?(n(),v("li",zt,[qt,E(s(f.dueBackDay)+"\u5929 ",1)])):u("v-if",!0),f.type===0?(n(),v("li",Ht,[Gt,l(y,{modelValue:f.realAmount,"onUpdate:modelValue":h=>f.realAmount=h,min:0,step:10,placeholder:"0.00","decimal-places":2,disabled:t.baseData.retreat.status!==1,onBlur:h=>g(f),onOnkeyup:B,onChange:h=>g(f)},null,8,["modelValue","onUpdate:modelValue","disabled","onBlur","onChange"])])):u("v-if",!0),f.type===0?(n(),v("li",Pt,[Yt,l(T,{modelValue:f.remark,"onUpdate:modelValue":h=>f.remark=h,disabled:t.baseData.retreat.status!==1,class:"wt-400",placeholder:"\u8BF7\u8F93\u5165",maxlength:50},null,8,["modelValue","onUpdate:modelValue","disabled"])])):u("v-if",!0),f.type===1?(n(),v("li",Kt,[Jt,E(s(f.nursingName),1)])):u("v-if",!0)]))),128))])])):u("v-if",!0),u(" end "),u(" \u6B20\u8D39 "),o.value.length>0?(n(),v("div",Wt,[e("div",Xt,[Zt,e("div",Qt,[e("span",null,"\u5F85\u529E\uFF1A"+s(o.value.length),1),e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(S.value))+"\u5143",1)])]),e("div",el,[(n(!0),v(M,null,K(o.value,(f,R)=>(n(),v("ul",{key:R,class:"bg"},[e("li",ul,[e("div",al,[tl,E(s(f.code),1),e("span",ll,s(f.type===0?"\u6708\u5EA6\u8D26\u5355":"\u8D39\u7528\u8D26\u5355"),1)])]),e("li",null,[sl,E(s(f.billMonth),1)]),e("li",null,[ol,E(s(w(U)(f.amount))+"\u5143 ",1)])]))),128))])])):u("v-if",!0),u(" end "),u(" \u4F59\u989D "),e("div",nl,[e("div",il,[rl,e("div",cl,[e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(m.value))+"\u5143",1)])]),e("div",dl,[u(" balanceVo "),e("ul",null,[e("li",vl,[Fl,E(s(w(U)(d.value.depositAmount))+"\u5143 ",1)]),e("li",null,[ml,l(y,{modelValue:d.value.arrearsAmount,"onUpdate:modelValue":V[0]||(V[0]=f=>d.value.arrearsAmount=f),min:0,step:10,disabled:t.baseData.retreat.status!==1,placeholder:"0.00","decimal-places":2,onBlur:V[1]||(V[1]=f=>N(d.value.arrearsAmount)),onOnkeyup:B,onChange:N},null,8,["modelValue","disabled"])]),e("li",_l,[fl,l(T,{modelValue:d.value.description,"onUpdate:modelValue":V[2]||(V[2]=f=>d.value.description=f),class:"wt-400",disabled:t.baseData.retreat.status!==1,placeholder:"\u8BF7\u8F93\u5165",maxlength:50},null,8,["modelValue","disabled"])]),e("li",null,[hl,E(s(w(U)(d.value.prepaidBalance))+"\u5143 ",1)])])])]),u(" end "),u(" \u672A\u7F34 "),i.value.length>0?(n(),v("div",bl,[e("div",pl,[Dl,e("div",Bl,[e("span",null,"\u5F85\u529E\uFF1A"+s(i.value.length),1),e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)($.value))+"\u5143",1)])]),e("div",El,[(n(!0),v(M,null,K(i.value,(f,R)=>(n(),v("ul",{key:R,class:"bg"},[e("li",Al,[e("div",Cl,[gl,E(s(f.code),1),yl])]),e("li",null,[$l,E(s(f.nursingName),1)]),e("li",null,[Vl,E(s(w(U)(f.amount))+"\u5143 ",1)])]))),128))])])):u("v-if",!0),u(" end "),e("div",kl," \u6700\u7EC8\u9000\u6B3E\u91D1\u989D = \u5E94\u9000 - \u6B20\u8D39 +\u4F59\u989D = "+s(r.value)+" \u5143 ",1)]),_:1})]),_:1},512),u(" end ")])}}});var Sl=Y(wl,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/AdjustBill.vue"]]);const xl={class:"dialog-form"},Tl={class:"dialogCenter"},Ll=e("div",null,[e("button",{class:"bt bt-grey wt-60",type:"reset"},"\u53D6\u6D88"),e("button",{theme:"primary",type:"submit",class:"bt wt-60"},[e("span",null,"\u786E\u5B9A")])],-1),Il=P({__name:"UploadVoucher",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:()=>({})}},emits:["handleClose","handleUpload","handleEditForm"],setup(t,{expose:k,emit:C}){const o=t,S=c("empty"),d=c(),m=c(!1),_=c({}),A=c(!0),i=c([]),$=c({size:2,unit:"MB",message:"\u56FE\u7247\u5927\u5C0F\u8D85\u8FC72m\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"}),r={tradingChannel:[{required:!0,message:"\u9000\u6B3E\u65B9\u5F0F\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u9000\u6B3E\u65B9\u5F0F",type:"error",trigger:"change"}],refundVoucherUrl:[{required:!0,message:"\u9000\u6B3E\u51ED\u8BC1\u4E3A\u7A7A\uFF0C\u8BF7\u4E0A\u4F20\u9000\u6B3E\u51ED\u8BC1",type:"error",trigger:"change"}],remark:[{required:!0,message:"\u9000\u6B3E\u5907\u6CE8\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u9000\u6B3E\u5907\u6CE8",type:"error",trigger:"blur"}]};de(()=>o.visible,()=>{m.value=o.visible;const y=o.data;if(y.refundVoucherUrl){_.value=y,i.value=[];const T={url:y.refundVoucherUrl};i.value.push(T)}});const N=y=>{y.validateResult===!0&&C("handleUpload",_.value)},g=()=>{d.value.reset(),i.value=[]},b=()=>{g(),C("handleClose")},B=()=>{i.value=[],_.value.refundVoucherUrl=""},a=()=>{H.error("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25")},V=y=>{const T=y.response.data;_.value.refundVoucherUrl=T,i.value[0].response.url=T,i.value[0].url=T},I=y=>y.size>2*1024*1024?(H.error("\u56FE\u7247\u5927\u5C0F\u8D85\u8FC72M\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"),!1):!0;return k({handleClear:g}),(y,T)=>{const q=D("t-option"),J=D("t-select"),f=D("t-form-item"),R=D("t-upload"),h=D("t-textarea"),z=D("t-form"),O=D("t-dialog");return n(),v("div",xl,[l(O,{visible:m.value,"onUpdate:visible":T[3]||(T[3]=L=>m.value=L),header:"\u4E0A\u4F20\u9000\u6B3E\u51ED\u8BC1",footer:!1,"on-close":b},{body:F(()=>[u(" \u8868\u5355\u5185\u5BB9 "),e("div",Tl,[l(z,{ref_key:"form",ref:d,data:_.value,rules:r,"label-width":80,"on-cancel":"onClickCloseBtn","reset-type":S.value,onReset:b,onSubmit:N},{default:F(()=>[l(f,{label:"\u9000\u6B3E\u65B9\u5F0F\uFF1A",name:"tradingChannel"},{default:F(()=>[l(J,{modelValue:_.value.tradingChannel,"onUpdate:modelValue":T[0]||(T[0]=L=>_.value.tradingChannel=L),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",class:"wt-300"},{default:F(()=>[(n(!0),v(M,null,K(w(je),(L,ae)=>(n(),G(q,{key:ae,value:L.value,label:L.value,title:""},{default:F(()=>[E(s(L.value),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"\u9000\u6B3E\u51ED\u8BC1\uFF1A",name:"refundVoucherUrl"},{default:F(()=>[l(R,{ref:"uploadRef",modelValue:i.value,"onUpdate:modelValue":T[1]||(T[1]=L=>i.value=L),action:"api/common/upload",autoUpload:A.value,theme:"image","size-limit":$.value,tips:"\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC72M,\u4EC5\u652F\u6301\u4E0A\u4F20PNG JPG JPEG\u7C7B\u578B\u56FE\u7247",accept:"image/*","before-upload":I,onRemove:B,onFail:a,onSuccess:V},null,8,["modelValue","autoUpload","size-limit"])]),_:1}),l(f,{label:"\u9000\u6B3E\u5907\u6CE8\uFF1A",name:"remark"},{default:F(()=>[l(h,{modelValue:_.value.remark,"onUpdate:modelValue":T[2]||(T[2]=L=>_.value.remark=L),class:"wt-400",placeholder:"\u8BF7\u8F93\u5165",maxlength:50},null,8,["modelValue"])]),_:1}),l(f,{class:"dialog-footer"},{default:F(()=>[Ll]),_:1})]),_:1},8,["data","reset-type"])])]),_:1},8,["visible"])])}}});var Ul=Y(Il,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/UploadVoucher.vue"]]);const Nl={class:"dialog-form"},Rl={class:"contractTit"},jl=e("span",null,"\u8D26\u5355\u660E\u7EC6",-1),Ol={class:"titTip"},Ml={key:0,class:"fillCon"},zl={class:"titleInfo"},ql={class:"lText"},Hl={class:"rText"},Gl={class:"itemCon"},Pl={class:"fist wt-100"},Yl={class:"lText"},Kl=e("label",null,"\u8D26\u5355\u7F16\u53F7\uFF1A",-1),Jl={class:"bt-small"},Wl=e("label",null,"\u8D26\u5355\u6708\u4EFD\uFF1A",-1),Xl=e("label",null,"\u5E94\u4ED8\u91D1\u989D\uFF1A",-1),Zl={key:1,class:"fillCon"},Ql={class:"titleInfo"},es=e("div",{class:"lText"},"\u4F59\u989D",-1),us={class:"rText"},as={class:"itemCon"},ts={class:"bg"},ls=e("label",null,"\u5269\u4F59\u9884\u7F34\u6B3E\uFF1A",-1),ss={class:"total"},os={class:"text"},ns={key:0,class:"footBtn"},is=P({__name:"Liquidation",props:{baseData:{type:Object,default:()=>({})},isVallidate:{type:Boolean,default:!1}},emits:["upLoadSuccess"],setup(t,{emit:k}){const C=t,o=c(!1),S=c(null),d=c({});de(()=>C.baseData,g=>{r()}),se(()=>{r()});const m=ue(()=>{const g=C.baseData.retreatBillVo;let b=0;return g.balanceVo&&(b=g.balanceVo.arrearsAmount+g.balanceVo.prepaidBalance),b}),_=ue(()=>{const g=C.baseData.retreatBillVo;let b=0;return g&&g.arrearageList.length>0&&g.arrearageList.forEach(B=>{b+=B.amount}),b}),A=ue(()=>{let g=0;return g=m.value-_.value,g}),i=()=>{o.value=!1},$=()=>{C.baseData.retreat.status===1&&C.baseData.retreatBillVo.arrearageList.length===0&&C.baseData.retreatBillVo.balanceVo&&C.baseData.retreatBillVo.balanceVo.prepaidBalance>0&&(o.value=!0,r())},r=async()=>{const g={retreatId:C.baseData.retreat.id},b=await ze(g);b.code===200&&(d.value=b.data,d.value.refundVoucherUrl&&k("upLoadSuccess",!1))},N=async g=>{const b={...g,retreatCode:C.baseData.retreat.retreatCode,refundAmount:A.value};(await qe(b)).code===200&&(H.success("\u64CD\u4F5C\u6210\u529F"),k("upLoadSuccess",!1),r(),i())};return(g,b)=>{const B=D("t-icon"),a=D("t-tooltip"),V=D("t-card");return n(),v("div",Nl,[u(" \u57FA\u672C\u4FE1\u606F "),l(V,{title:"\u5B8C\u6210\u8D26\u5355\u6E05\u7B97"},{default:F(()=>[e("div",Rl,[jl,e("span",Ol,[l(B,{class:"warnIcon"}),E("\u5B8C\u6210\u6B20\u8D39\u7F34\u8D39\u548C\u4F59\u989D\u9000\u6B3E\u540E\uFF0C\u65B9\u53EF\u5B8C\u6210\u9000\u4F4F\u529E\u7406")])]),u(" \u6B20\u8D39 "),t.baseData.retreatBillVo.arrearageList.length>0?(n(),v("div",Ml,[e("div",zl,[e("div",ql,[E(" \u6B20\u8D39 "),l(a,{class:"placement right-full align",content:"","show-arrow":!1,placement:"right"},{content:F(()=>[E(" \u53EF\u8054\u7CFB\u8001\u4EBA\u53CA\u5BB6\u5C5E\u8FDB\u884C\u7EBF\u4E0B\u652F\u4ED8\u6216\u5145\u503C\u9884\u7F34\u6B3E")]),default:F(()=>[l(B,{class:"warnIcon"})]),_:1})]),e("div",Hl,[e("span",null,"\u5F85\u529E\uFF1A"+s(t.baseData.retreatBillVo.arrearageList.length),1),e("span",null,"\u5C0F\u8BA1\uFF1A"+s(w(U)(_.value))+"\u5143",1)])]),e("div",Gl,[(n(!0),v(M,null,K(t.baseData.retreatBillVo.arrearageList,(I,y)=>(n(),v("ul",{key:y,class:"bg"},[e("li",Pl,[e("div",Yl,[Kl,E(s(I.code),1),e("span",Jl,s(I.type===0?"\u6708\u5EA6\u8D26\u5355":"\u8BA2\u5355"),1)])]),e("li",null,[Wl,E(s(I.billMonth),1)]),e("li",null,[Xl,E(s(w(U)(I.amount))+"\u5143 ",1)])]))),128))])])):u("v-if",!0),u(" end "),u(" \u4F59\u989D "),t.baseData.retreatBillVo.balanceVo?(n(),v("div",Zl,[e("div",Ql,[es,e("div",us,[e("span",null,"\u5C0F\u8BA1\uFF1A"+s(m.value)+"\u5143",1)])]),e("div",as,[e("ul",ts,[e("li",null,[ls,E(s(t.baseData.retreatBillVo.balanceVo.prepaidBalance)+"\u5143 ",1)])])])])):u("v-if",!0),u(" end "),e("div",ss,[e("div",os," \u6700\u7EC8\u9000\u6B3E\u91D1\u989D = \u4F59\u989D - \u6B20\u8D39 = "+s(w(U)(A.value))+"\u5143 ",1),t.baseData.retreat.status===1?(n(),v("div",ns,[e("span",{class:ce(["bt",t.baseData.retreat.status===1&&t.baseData.retreatBillVo.arrearageList.length===0&&t.baseData.retreatBillVo.balanceVo&&t.baseData.retreatBillVo.balanceVo.prepaidBalance>0?"":"bt-forbid"]),onClick:$},s(d.value.refundVoucherUrl?"\u7F16\u8F91\u9000\u6B3E\u51ED\u8BC1":"\u4E0A\u4F20\u9000\u6B3E\u51ED\u8BC1"),3)])):u("v-if",!0)])]),_:1}),u(" end "),u(" \u9000\u6B3E\u51ED\u8BC1\u4E0A\u4F20 "),l(Ul,{ref_key:"fromRef",ref:S,visible:o.value,data:d.value,onHandleClose:i,onHandleUpload:N},null,8,["visible","data"]),u(" end ")])}}});var rs=Y(is,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/Liquidation.vue"]]);const cs={class:"applyBaseInfo"},ds={class:"dialog-form"},vs=P({__name:"RightApply",props:{baseData:{type:Object,default:()=>({})},active:{type:Number,default:0}},setup(t,{expose:k}){const C=c(),o=c({}),S=c([]),d=c("\u5BA1\u6279\u610F\u89C1"),m=c(null),_=c(0),A={auditStatus:[{required:!0,message:"\u5BA1\u6279\u7ED3\u679C\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u5BA1\u6279\u7ED3\u679C",type:"error",trigger:"change"}],opinion:[{required:!0,message:"\u5BA1\u6279\u610F\u89C1\u4E3A\u7A7A\uFF0C\u8BF7\u586B\u5199\u5BA1\u6279\u610F\u89C1",type:"error",trigger:"blur"}]};se(()=>{_.value=m.value.clientHeight,S.value=Oe});const i=()=>{C.value.reset()},$=r=>{r===3?d.value="\u9A73\u56DE\u539F\u56E0":d.value="\u5BA1\u6279\u610F\u89C1"};return k({form:C,formData:o,handleClear:i}),(r,N)=>{const g=D("t-radio"),b=D("t-radio-group"),B=D("t-form-item"),a=D("t-textarea"),V=D("t-form"),I=D("t-card");return n(),v("div",cs,[u(" \u64CD\u4F5C\u8BB0\u5F55"),t.baseData.retreat.status===1&&t.baseData.retreat.flowStatus===1&&t.active!==0||t.baseData.retreat.status===1&&t.baseData.retreat.flowStatus===3&&t.baseData.isShow===0&&t.active!==0||t.baseData.retreat.status===1&&t.baseData.retreat.flowStatus===4&&t.active===4||t.baseData.retreat.status===1&&t.baseData.retreat.flowStatus===5&&t.active===5?(n(),G(I,{key:0,title:"\u5BA1\u6279\u7ED3\u679C"},{default:F(()=>[e("div",ds,[l(V,{ref_key:"form",ref:C,data:o.value,rules:A,"label-width":80},{default:F(()=>[l(B,{label:"\u5BA1\u6279\u7ED3\u679C\uFF1A",name:"auditStatus",class:"lastText"},{default:F(()=>[l(b,{modelValue:o.value.auditStatus,"onUpdate:modelValue":N[0]||(N[0]=y=>o.value.auditStatus=y),onChange:$},{default:F(()=>[(n(!0),v(M,null,K(S.value,(y,T)=>(n(),G(g,{key:T,value:y.id},{default:F(()=>[E(s(y.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(B,{label:d.value+"\uFF1A",name:"opinion",class:"lastText"},{default:F(()=>[l(a,{modelValue:o.value.opinion,"onUpdate:modelValue":N[1]||(N[1]=y=>o.value.opinion=y),placeholder:"\u8BF7\u8F93\u5165",class:"t-textarea",name:"description",maxlength:200,clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1})):u("v-if",!0),u(" end "),u(" \u64CD\u4F5C\u8BB0\u5F55"),l(I,{title:"\u64CD\u4F5C\u8BB0\u5F55"},{default:F(()=>[e("div",{ref_key:"apply",ref:m,class:ce(["applyRecord",_.value>600?"scroll":""])},[l(De,{"base-data":t.baseData,active:t.active},null,8,["base-data","active"])],2)]),_:1}),u(" end ")])}}});var le=Y(vs,[["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/components/RightApply.vue"]]);const Fs={class:"apply detail-base"},ms={class:"bg-wt stepContainer mb-24"},_s={key:0,id:"menuFlag0"},fs={key:0,class:"baseCon"},hs={class:"baseL"},bs={key:0},ps={key:1},Ds={class:"baseR"},Bs={key:1,class:"stepForm"},Es={key:1,id:"menuFlag1"},As={key:0,class:"baseCon"},Cs={class:"baseL"},gs={class:"baseR"},ys={key:1,class:"bg-wt mb-24"},$s={class:"applyApproval"},Vs={key:2,id:"menuFlag2"},ks={key:0,class:"baseCon"},ws={class:"baseL"},Ss={class:"baseR"},xs={class:"bg-wt mb-24"},Ts={class:"applyApproval"},Ls={key:3,id:"menuFlag3"},Is={key:0,class:"baseCon"},Us={class:"baseL"},Ns={class:"baseR"},Rs={class:"bg-wt mb-24"},js={class:"applyApproval"},Os=["id"],Ms={key:0,class:"baseCon"},zs={class:"baseL"},qs={class:"baseR"},Hs={key:1,class:"bg-wt mb-24"},Gs={class:"applyApproval"},Ps={key:5,id:"menuFlag6"},Ys={key:0,class:"baseCon"},Ks={class:"baseL"},Js={class:"baseR"},Ws={class:"bg-wt mb-24"},Xs={class:"applyApproval"},Zs={class:"boxBottom fx fx-ct bg-wt"},Qs=P({__name:"details",setup(t){const k=Ie(),C=Ue(),o=c(0),S=c([]),d=c(null),m=c(null),_=c(null),A=c(null),i=c(!0),$=c(""),r=c(!1),N=c(""),g=c(""),b=c(""),B=c(""),a=c({retreat:{},accraditationRecords:[],retreatBillVo:{unpaidList:[],dueBackList:[],arrearageList:[],balanceVo:{}}}),V=c(!1),I=c(-1),y=c(!1),T=c(!1),q=c(!1),J=c(null),f=c(!1),R=c({}),h=c(!1),z=c(""),O=c(!1);se(()=>{ve(),k.query.code!==void 0?(b.value=k.query.code,B.value=k.query.assigneeId,z.value=k.query.taskId,ie()):(o.value=0,i.value=!1),he(()=>{window.addEventListener("scroll",ae,!0)})});const L=()=>{he(()=>{const p=document.getElementById(`menuFlag${o.value}`),j=Number(window.getComputedStyle(p).height.slice(0,-2));(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-295>j?(f.value=!0,h.value=!1):(f.value=!1,h.value=!0)})},ae=p=>{if(p.stopPropagation(),p.target.className==="t-layout czri-layout"){const{scrollTop:j,clientHeight:re,scrollHeight:me}=p.target;j+re===me?f.value=!0:f.value=!1}},ve=async()=>{const p=await Xe();p.code===200&&(S.value=p.data)},ie=async()=>{const p={retreatCode:b.value,assigneeId:B.value,flowStatus:I.value,taskId:z.value},j=await He(p);j.code===200&&(a.value=j.data,a.value.retreat=j.data.retreat,a.value.rescissionContract=j.data.rescissionContract,a.value.accraditationRecords=j.data.accraditationRecords,a.value.retreatBillVo=j.data.retreatBillVo,a.value.retreat.flowStatus===1||a.value.retreat.flowStatus===4||a.value.retreat.flowStatus===5?$.value="\u5BA1\u6279\u7ED3\u679C":$.value="\u5904\u7406\u7ED3\u679C",a.value.retreatBillVo&&a.value.retreat.flowStatus===3&&(a.value.retreatBillVo.unpaidList.length===0&&a.value.retreatBillVo.balanceVo&&a.value.retreatBillVo?i.value=!1:i.value=!0),a.value.retreat&&(i.value=!1),a.value.retreatBillVo&&a.value.retreatBillVo.unpaidList.length>0&&(i.value=!0),V.value||(o.value=j.data.retreat.flowStatus),a.value.retreatBillVo&&a.value.retreat.flowStatus===6&&o.value===6&&(a.value.retreatBillVo&&a.value.retreatBillVo.arrearageList.length===0?(i.value=!1,a.value.retreatBillVo&&a.value.retreatBillVo.balanceVo.prepaidBalance>0&&(i.value=!0)):i.value=!0)),L()},Q=()=>{setTimeout(()=>{W(),clearTimeout()},3e3)},W=()=>{O.value=!1},ee=()=>{O.value=!0},x=()=>{if(O.value)return!1;if(o.value===0&&d.value.form.validate().then(p=>{p===!0&&(ee(),Be(),d.value.handleClear())}),(o.value===1||o.value===5||o.value===4)&&m.value.form.validate().then(p=>{p===!0&&(ee(),Fe())}),o.value===2&&_.value.form.validate().then(p=>{if(p===!0){ee();const j={code:b.value,assigneeId:B.value,taskId:z.value,accraditationRecord:{auditStatus:1,opinion:"\u540C\u610F"},rescissionContract:{..._.value.formData,relieveTime:`${be(_.value.formData.time).format("YYYY-MM-DD")} 00:00:00`,retreatId:a.value.retreat.id}};oe(j)}}),o.value===3&&a.value.retreat.status===1&&a.value.retreatBillVo.unpaidList.length===0&&(N.value="\u786E\u8BA4\u63D0\u4EA4",r.value=!0),o.value===3){const p={code:b.value,assigneeId:B.value,taskId:z.value,accraditationRecord:{auditStatus:1,opinion:"\u540C\u610F"},billJson:JSON.stringify({arrearageList:A.value.arrearageList,balanceVo:A.value.balanceVo,dueBackList:A.value.dueBackList,unpaidList:A.value.unpaidList,moneySum:Number(A.value.moneySum),balanceSum:A.value.balanceSum,dueBackSum:A.value.dueBackSum,arrearageSum:A.value.arrearageSum})};R.value=p}if(o.value===6&&!i.value){ee();const p={code:b.value,assigneeId:B.value,taskId:z.value,accraditationRecord:{auditStatus:1,opinion:"\u540C\u610F"}};oe(p)}},Fe=()=>{const p=m.value.formData.auditStatus;let j={};p===1?(j={code:b.value,assigneeId:B.value,taskId:z.value,accraditationRecord:{...m.value.formData}},a.value.retreat.flowStatus!==3&&oe(j)):p===2?(N.value="\u786E\u8BA4\u62D2\u7EDD",g.value="\u62D2\u7EDD\u5BA1\u6279\u540E\uFF0C\u6B64\u6D41\u7A0B\u5C06\u81EA\u52A8\u7ED3\u675F\uFF0C\u65E0\u6CD5\u8FDB\u884C\u6D41\u8F6C",r.value=!0,q.value=!0):(N.value="\u786E\u8BA4\u9A73\u56DE",g.value="\u9A73\u56DE\u7533\u8BF7\u540E\uFF0C\u8BE5\u6D41\u7A0B\u5C06\u81EA\u52A8\u9A73\u56DE\u81F3\u53D1\u8D77\u4EBA",r.value=!0,T.value=!0)},Be=async()=>{const p={...d.value.formData,checkOutTime:`${be(d.value.formData.checkOutTime).format("YYYY-MM-DD")} 00:00:00`,status:0,taskId:z.value};(await Ge(p)).code===200?(Q(),H.success("\u64CD\u4F5C\u6210\u529F"),C.go(-1)):W()},oe=async p=>{(await Pe(p)).code===200?(H.success("\u64CD\u4F5C\u6210\u529F"),Q(),C.push({path:"/active/backlog"})):W()},Ee=async()=>{const p={retreatCode:b.value,reject:m.value.formData.opinion,taskId:z.value};(await Ye(p)).code===200?(H.success("\u64CD\u4F5C\u6210\u529F"),Q(),C.push({path:"/active/backlog"})):W()},Ae=async()=>{const p={retreatCode:b.value,message:m.value.formData.opinion,taskId:z.value};(await Ke(p)).code===200?(H.success("\u64CD\u4F5C\u6210\u529F"),Q(),C.push({path:"/active/backlog"})):W()},Ce=async()=>{const p={retreatCode:b.value,flowStatus:a.value.retreat.flowStatus,taskId:z.value};(await Je(p)).code===200?(H.success("\u64CD\u4F5C\u6210\u529F"),Q(),C.go(-1)):W()},X=p=>{i.value=p},ge=p=>{i.value=p},ye=p=>{if(b.value==="")return!1;if(a.value.retreat.flowStatus>=p){if(p===1||p===4||p===5?$.value="\u5BA1\u6279\u7ED3\u679C":$.value="\u5904\u7406\u7ED3\u679C",p>a.value.retreat.flowStatus)return!1;V.value=!0,o.value=p,I.value=p,i.value=!0,ie(),L()}},_e=()=>{O.value=!1,r.value=!1},$e=()=>{if(y.value)Ce();else if(T.value)Ae();else if(q.value)Ee();else if(o.value===3)ee(),oe(R.value);else{const p={code:b.value,assigneeId:B.value,taskId:z.value,accraditationRecord:{...m.value.formData}};oe(p)}_e()},Ve=()=>{N.value="\u786E\u8BA4\u64A4\u56DE",g.value="\u64A4\u56DE\u5DF2\u63D0\u4EA4\u4FE1\u606F",y.value=!0,r.value=!0},ke=p=>{i.value=p},we=()=>{C.go(-1)};return(p,j)=>{const re=D("t-step-item"),me=D("t-steps");return n(),v(M,null,[e("div",Fs,[e("div",ms,[u(" step "),u(" \u9000\u4F4F\u6B65\u9AA4\u6761 0\u7533\u8BF7\u9000\u4F4F\u30011\u7533\u8BF7\u5BA1\u6279\u30012\u89E3\u9664\u5408\u540C\u30013\u8C03\u6574\u8D26\u5355\u30014\u8D26\u5355\u5BA1\u6279\u30015\u9000\u4F4F\u5BA1\u6279\u30016\u8D39\u7528\u6E05\u7B97"),l(me,{current:o.value,onChange:ye},{default:F(()=>[(n(!0),v(M,null,K(w(Me),(Se,fe)=>(n(),G(re,{key:fe,class:ce(fe<=a.value.retreat.flowStatus?"flowStatus":""),title:Se.value},null,8,["class","title"]))),128))]),_:1},8,["current"]),u(" \u6B65\u9AA4\u6761 ")]),u(" end "),e("div",{ref_key:"mainHeight",ref:J,class:"bg-wt min-steph height"},[u(" \u9A73\u56DE\u540E\u53EF\u7F16\u8F91\u3001\u7533\u8BF7\u5BA1\u6279\u3001\u89E3\u9664\u5408\u540C\u3001\u8C03\u6574\u8D26\u5355\u3001\u8D26\u5355\u5BA1\u6279\u3001\u9000\u4F4F\u5BA1\u6279\u663E\u793A\u63D0\u4EA4\u6309\u94AE "),u(" status 1\u5BA1\u6279\u4E2D2\u5B8C\u62103\u5173\u95ED "),u(" flowStatus 0\u7533\u8BF7\u9000\u4F4F\u30011\u7533\u8BF7\u5BA1\u6279\u30012\u89E3\u9664\u5408\u540C\u30013\u8C03\u6574\u8D26\u5355\u30014\u8D26\u5355\u5BA1\u6279\u30015\u9000\u4F4F\u5BA1\u6279\u30016\u8D39\u7528\u6E05\u7B97 "),u(" defaultCurrent\u5F53\u524D\u7684step\u6B65\u9AA4\u6761\u72B6\u6001 "),e("div",null,[u(" \u7B2C\u4E00\u6B65\uFF1A\u7533\u8BF7\u9000\u4F4F-\u7533\u8BF7\u4FE1\u606F "),o.value===0?(n(),v("div",_s,[b.value!==""?(n(),v("div",fs,[e("div",hs,[a.value.retreat.status===1&&a.value.retreat.flowStatus===0&&a.value.isShow===1?(n(),v("div",bs,[l(pe,{ref_key:"applyForm",ref:d,data:S.value,"base-data":a.value,onGetVallidate:X},null,8,["data","base-data"])])):(n(),v("div",ps,[l(te,{"base-data":a.value,active:o.value},null,8,["base-data","active"])]))]),e("div",Ds,[l(le,{ref_key:"rightApply",ref:m,"base-data":a.value,active:o.value,onGetVallidate:X},null,8,["base-data","active"])])])):(n(),v("div",Bs,[l(pe,{ref_key:"applyForm",ref:d,data:S.value,onGetVallidate:X},null,8,["data"])]))])):u("v-if",!0),u(" end "),o.value===1?(n(),v("div",Es,[u(" \u7B2C\u4E8C\u6B65\uFF1A\u7533\u8BF7\u5BA1\u6279-\u5BA1\u6279\u57FA\u672C\u4FE1\u606F-\u64CD\u4F5C\u4EBA\u9875\u9762 "),a.value.isShow===1||a.value.retreat.status!==3&&a.value.retreat.status!==1?(n(),v("div",As,[e("div",Cs,[l(te,{"base-data":a.value,active:o.value},null,8,["base-data","active"])]),e("div",gs,[l(le,{ref_key:"rightApply",ref:m,"base-data":a.value,active:o.value,onGetVallidate:X},null,8,["base-data","active"])])])):u("v-if",!0),u(" end "),u(" \u64CD\u4F5C\u8BB0\u5F55 "),u(" \u64CD\u4F5C\u8BB0\u5F55-\u975E\u64CD\u4F5C\u4EBA\u770B\u5230\u7684\u754C\u9762 "),a.value.isShow===0&&a.value.retreat.status===1||a.value.isShow===0&&a.value.retreat.status===3?(n(),v("div",ys,[e("div",$s,[l(ne,{title:$.value,"base-data":a.value,active:o.value},null,8,["title","base-data","active"])])])):u("v-if",!0),u(" end ")])):u("v-if",!0),u(" \u7B2C\u4E09\u6B65\uFF1A\u89E3\u9664\u5408\u540C-\u64CD\u4F5C\u4EBA\u9875\u9762 "),o.value===2?(n(),v("div",Vs,[a.value.isShow===1?(n(),v("div",ks,[e("div",ws,[u(" \u57FA\u672C\u4FE1\u606F "),l(te,{"base-data":a.value,active:o.value},null,8,["base-data","active"]),u(" end "),u(" \u89E3\u9664\u5408\u540C "),a.value.retreat.flowStatus===2&&a.value.retreat.status===1?(n(),G(At,{key:0,ref_key:"contract",ref:_,"base-data":a.value,onGetVallidate:ge},null,8,["base-data"])):u("v-if",!0),u(" end ")]),e("div",Ss,[l(le,{ref_key:"rightApply",ref:m,"base-data":a.value,active:o.value,onGetVallidate:X},null,8,["base-data","active"])])])):(n(),v(M,{key:1},[u(" \u64CD\u4F5C\u8BB0\u5F55 "),u(" \u64CD\u4F5C\u8BB0\u5F55-\u975E\u64CD\u4F5C\u4EBA\u770B\u5230\u7684\u754C\u9762 "),e("div",xs,[e("div",Ts,[l(ne,{title:$.value,"base-data":a.value,active:o.value},null,8,["title","base-data","active"])])])],2112)),u(" end ")])):u("v-if",!0),u(" end "),u(" \u7B2C\u56DB\u6B65\uFF1A\u8C03\u6574\u8D26\u5355-\u64CD\u4F5C\u4EBA\u9875\u9762 "),o.value===3?(n(),v("div",Ls,[a.value.isShow===1?(n(),v("div",Is,[e("div",Us,[u(" \u57FA\u672C\u4FE1\u606F "),l(te,{"base-data":a.value,active:o.value},null,8,["base-data","active"]),u(" end "),a.value.retreat.flowStatus===3?(n(),G(Sl,{key:0,ref_key:"adjustBillRef",ref:A,"base-data":a.value},null,8,["base-data"])):u("v-if",!0)]),e("div",Ns,[l(le,{ref_key:"rightApply",ref:m,"base-data":a.value,active:o.value,onGetVallidate:X},null,8,["base-data","active"])])])):(n(),v(M,{key:1},[u(" \u64CD\u4F5C\u8BB0\u5F55 "),u(" \u64CD\u4F5C\u8BB0\u5F55-\u975E\u64CD\u4F5C\u4EBA\u770B\u5230\u7684\u754C\u9762 "),e("div",Rs,[e("div",js,[l(ne,{title:$.value,"base-data":a.value,active:o.value},null,8,["title","base-data","active"])])])],2112)),u(" end ")])):u("v-if",!0),u(" end "),u(" \u7B2C\u4E94\u6B65/\u7B2C\u516D\u6B65\uFF1A\u8D26\u5355\u5BA1\u6279/\u9000\u4F4F\u5BA1\u6279 "),o.value===4||o.value===5?(n(),v("div",{key:4,id:o.value===4?"menuFlag4":"menuFlag5"},[a.value.isShow===1||a.value.retreat.status===3?(n(),v("div",Ms,[e("div",zs,[u(" \u57FA\u672C\u4FE1\u606F "),l(te,{"base-data":a.value,active:o.value},null,8,["base-data","active"]),u(" end ")]),e("div",qs,[l(le,{ref_key:"rightApply",ref:m,"base-data":a.value,active:o.value,onGetVallidate:X},null,8,["base-data","active"])])])):u("v-if",!0),u(" \u64CD\u4F5C\u8BB0\u5F55 "),u(" \u64CD\u4F5C\u8BB0\u5F55-\u975E\u64CD\u4F5C\u4EBA\u770B\u5230\u7684\u754C\u9762 "),a.value.isShow===0&&a.value.retreat.status===1?(n(),v("div",Hs,[e("div",Gs,[l(ne,{title:$.value,"base-data":a.value,active:o.value},null,8,["title","base-data","active"])])])):u("v-if",!0),u(" end ")],8,Os)):u("v-if",!0),u(" end "),u(" \u7B2C\u4E03\u6B65\uFF1A\u8D39\u7528\u6E05\u7B97 "),o.value===6?(n(),v("div",Ps,[a.value.isShow===1&&a.value.retreat.status===2||a.value.isShow===1&&a.value.retreat.status===1?(n(),v("div",Ys,[e("div",Ks,[u(" \u57FA\u672C\u4FE1\u606F "),l(te,{"base-data":a.value,active:o.value},null,8,["base-data","active"]),u(" end "),a.value.retreat.flowStatus===6&&a.value.retreat.status===1?(n(),G(rs,{key:0,ref:"liquidation","is-vallidate":i.value,"base-data":a.value,onUpLoadSuccess:ke},null,8,["is-vallidate","base-data"])):u("v-if",!0)]),e("div",Js,[l(le,{ref_key:"rightApply",ref:m,"base-data":a.value,active:o.value,onGetVallidate:X},null,8,["base-data","active"])])])):(n(),v(M,{key:1},[u(" \u64CD\u4F5C\u8BB0\u5F55-\u975E\u64CD\u4F5C\u4EBA\u770B\u5230\u7684\u754C\u9762 "),e("div",Ws,[e("div",Xs,[l(ne,{title:$.value,"base-data":a.value,active:o.value},null,8,["title","base-data","active"])])])],2112)),u(" end ")])):u("v-if",!0),u(" end ")])],512)]),e("div",Zs,[e("button",{class:"bt-grey wt-60",onClick:we},"\u8FD4\u56DE"),u(" \u5F53\u524D\u64CD\u4F5C\u7684\u4EBA\u53EF\u4EE5\u64A4\u56DE\u81EA\u5DF1\u7533\u8BF7 "),(a.value.retreat.flowStatus===1?a.value.retreat.flowStatus:a.value.retreat.flowStatus-1)&&a.value.isRevocation?(n(),v("button",{key:0,theme:"primary",class:"bt wt-60",onClick:Ve}," \u64A4\u56DE ")):u("v-if",!0),u(" \u9A73\u56DE\u540E\u53EF\u7F16\u8F91\u3001\u7533\u8BF7\u5BA1\u6279\u3001\u89E3\u9664\u5408\u540C\u3001\u8C03\u6574\u8D26\u5355\u3001\u8D26\u5355\u5BA1\u6279\u3001\u9000\u4F4F\u5BA1\u6279\u663E\u793A\u63D0\u4EA4\u6309\u94AE "),u(" status 1\u5BA1\u6279\u4E2D2\u5B8C\u62103\u5173\u95ED "),u(" flowStatus 0\u7533\u8BF7\u9000\u4F4F\u30011\u7533\u8BF7\u5BA1\u6279\u30012\u89E3\u9664\u5408\u540C\u30013\u8C03\u6574\u8D26\u5355\u30014\u8D26\u5355\u5BA1\u6279\u30015\u9000\u4F4F\u5BA1\u6279\u30016\u8D39\u7528\u6E05\u7B97 "),u(" defaultCurrent\u5F53\u524D\u7684step\u6B65\u9AA4\u6761\u72B6\u6001 "),b.value===""||o.value===0&&a.value.retreat.status===1&&a.value.retreat.flowStatus===0&&a.value.isShow===1||a.value.retreat.flowStatus===1&&o.value===1&&a.value.isShow===1&&a.value.retreat.status!==3||a.value.retreat.flowStatus===2&&o.value===2&&a.value.isShow===1||a.value.retreat.flowStatus===3&&o.value===3&&a.value.isShow===1&&a.value.retreat.status!==3||a.value.retreat.flowStatus===4&&o.value===4&&a.value.isShow===1||a.value.retreat.flowStatus===5&&o.value===5&&a.value.isShow===1&&a.value.retreat.status!==3||a.value.retreat.flowStatus===6&&a.value.retreat.status===1&&o.value===6&&a.value.isShow===1?(n(),v("button",{key:1,class:ce(["bt wt-60",i.value?"bt-forbid":""]),theme:"primary",onClick:x}," \u63D0\u4EA4 ",2)):u("v-if",!0)]),u(" \u64CD\u4F5C\u5F39\u5C42 "),l(Ne,{visible:r.value,title:N.value,text:g.value,onHandleDelete:$e,onHandleClose:_e},null,8,["visible","title","text"]),u(" end ")],64)}}});var no=Y(Qs,[["__scopeId","data-v-4413b165"],["__file","D:/project/2023/project-zhyl-admin-vue3-java/src/pages/synergy/apply/details.vue"]]);export{no as default};
